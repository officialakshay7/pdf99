<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-57TC57Z3');</script>
<!-- End Google Tag Manager -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KC8H85HKF1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KC8H85HKF1');
</script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Split PDF | Seperate PDF Pages Online Free - PDF99</title>

    <!-- SEO meta (kept same structure as your original pages) -->
    <meta name="description" content="Split PDF files in seconds. Extract pages from a PDF - all in your browser." />
    <meta name="keywords"
        content="split pdf, extract pages pdf, pdf splitter, split pdf online, separate pdf pages, split pdf into parts, split pdf by page, pdf page extractor, divide pdf, free pdf splitter" />
    <link rel="canonical" href="https://www.pdf99.org/split-pdf" />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content="#ef4444" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Split PDF - PDF99" />
    <meta property="og:description"
        content="Split PDF files in seconds. Extract pages from a PDF - all in your browser." />
    <meta property="og:url" content="https://www.pdf99.org/split-pdf" />
    <meta property="og:site_name" content="PDF99" />
    <meta property="og:image" content="https://www.pdf99.org/assets/og-image-split-pdf.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Split PDF - PDF99" />
    <meta name="twitter:description"
        content="Split PDF files in seconds. Extract pages from a PDF - all in your browser." />
    <meta name="twitter:image" content="https://www.pdf99.org/assets/og-image-split-pdf.png" />

    <!-- Performance hints (same as original) -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        as="style" />

    <!-- Favicon & manifest -->
    <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png" />
    <link rel="manifest" href="manifest.json" />

    <!-- Structured data (JSON-LD) -->

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "SoftwareApplication",
      "@id": "https://www.pdf99.org/split-pdf#software",
      "name": "Split PDF",
      "url": "https://www.pdf99.org/split-pdf",
      "description": "Split PDF pages into separate files or extract selected pages quickly using PDF99's Split PDF tool - all in your browser.",
      "applicationCategory": "Utilities",
      "operatingSystem": "Web"
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://www.pdf99.org/split-pdf#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.pdf99.org/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Split PDF",
          "item": "https://www.pdf99.org/split-pdf"
        }
      ]
    }
  ]
}
</script>


    <!-- libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
    <script>
        if (window["pdfjsLib"])
            pdfjsLib.GlobalWorkerOptions.workerSrc =
                "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

        /* Hide scrollbar universally but keep scroll functionality */

        /* For Chrome, Safari, Edge */
        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            display: none;
            /* hide scrollbar */
            width: 0 !important;
            /* ensure no width */
            height: 0 !important;
        }

        :root {
            --nav-h: 72px;
            --footer-h: 64px;
            --settings-w: 320px;
            --content-max-w: 1200px;
            --fab-bottom-base: 16px;
            --fab-vertical-gap: 72px;
        }

        * {
            box-sizing: border-box;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
                "Helvetica Neue", Arial;
        }

        html,
        body {
            height: 100%;
            margin: 0;

            scrollbar-width: none;
            /* hide scrollbar */
            -ms-overflow-style: none;
            /* hide scrollbar */
        }

        body {
            background: #f9fafb;
            padding-top: var(--nav-h);
            padding-bottom: var(--footer-h);
        }

        nav.site-nav {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            height: var(--nav-h);
            background: #fff;
            border-bottom: 1px solid #eee;
            z-index: 60;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-inner {
            width: 100%;
            max-width: var(--content-max-w);
            margin: 0 auto;
            display: flex;
            align-items: center;
            position: relative;
            padding: 0 18px;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 70;
        }

        .nav-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .nav-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 70;
        }

        .nav-links {
            color: #374151;
            font-size: 13px;
            text-transform: uppercase;
            gap: 14px;
            display: flex;
            align-items: center;
        }

        .more-dropdown {
            position: relative;
        }

        .more-dropdown-menu {
            position: absolute;
            top: calc(var(--nav-h));
            right: 0;
            background: #fff;
            border: 1px solid #e6edf3;
            border-radius: 8px;
            padding: 8px 0;
            display: none;
            min-width: 200px;
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
        }

        .more-dropdown-menu.open {
            display: block;
        }

        .more-dropdown-menu a {
            display: block;
            padding: 8px 16px;
            color: #374151;
            text-decoration: none;
            font-size: 14px;
        }

        .more-dropdown-menu a:hover {
            background: #fbfbfd;
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .more-dropdown {
                display: none !important;
            }

            .nav-center {
                display: none !important;
            }
        }

        .mobile-hamburger {
            display: none;
            border: 0;
            background: transparent;
            font-size: 20px;
        }

        @media (max-width: 768px) {
            .mobile-hamburger {
                display: inline-flex;
            }
        }

        .mobile-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 260px;
            background: #fff;
            transform: translateX(-110%);
            transition: transform 0.26s;
            padding: 16px;
            border-right: 1px solid #eef2f6;
            z-index: 980;
            overflow: auto;
        }

        .mobile-sidebar.open {
            transform: translateX(0);
        }

        .mobile-sidebar .close {
            display: block;
            margin-bottom: 12px;
            margin-left: auto;
            font-size: 1.2rem;
            font-weight: 900;
        }

        .mobile-sidebar a {
            display: block;
            padding: 10px 8px;
            color: #333;
            text-decoration: none;
            border-radius: 6px;
        }

        .mobile-sidebar a:hover {
            background: #f8fafc;
            color: #ef4444;
        }

        .mobile-more-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 10px 8px;
            border-radius: 6px;
            cursor: pointer;
        }

        .mobile-more-list {
            display: none;
            margin-top: 6px;
            padding-left: 6px;
        }

        .mobile-more-list a {
            padding: 8px 6px;
            display: block;
            color: #333;
            text-decoration: none;
            border-radius: 6px;
        }

        .mobile-more-list.open {
            display: block;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.45);
            z-index: 920;
            display: none;
        }

        .overlay.open {
            display: block;
        }

        footer.site-footer {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            height: var(--footer-h);
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            border-top: 1px solid #eee;
            z-index: 60;
        }

        .page-wrap {
            max-width: var(--content-max-w);
            margin: 0 auto;
            padding: 18px;
        }

        .settings-panel {
            transition: transform 0.24s;
        }

        @media (min-width: 769px) {
            .settings-panel {
                position: fixed;
                right: 0;
                top: var(--nav-h);
                bottom: var(--footer-h);
                width: var(--settings-w);
                background: #fff;
                border-radius: 0;
                box-shadow: none;
                border-left: 1px solid #f1f5f9;
                padding: 20px;
                overflow: auto;
                z-index: 960;
            }

            .main-content {
                margin-right: calc(var(--settings-w) + 18px);
                position: relative;
            }

            .add-more-btn {
                position: fixed;
                right: calc(var(--settings-w) + 12px);
                bottom: 15%;
                transform: translateY(-50%);
                z-index: 940;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #fff;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            }

            #convert-btn-desktop {
                position: absolute;
                left: 20px;
                right: 20px;
                bottom: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .settings-panel .content-padding-bottom {
                padding-bottom: 86px;
            }
        }

        @media (max-width: 768px) {
            .settings-panel {
                position: fixed;
                right: 0;
                top: 0;
                bottom: 0;
                width: 85%;
                max-width: 320px;
                transform: translateX(100%);
                background: #fff;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
                padding: 28px;
                z-index: 990;
            }

            .settings-panel.open {
                transform: translateX(0);
            }

            /* ensure mobile buttons visible and on top */
            #convert-btn-mobile {
                position: fixed;
                right: 18px;
                bottom: calc(var(--footer-h) + var(--fab-bottom-base));
                z-index: 1500 !important;
                min-width: 56px;
                padding-left: 12px;
                padding-right: 12px;
                border-radius: 999px;
                display: inline-flex !important;
                align-items: center;
                justify-content: center;
            }

            #open-settings {
                position: fixed;
                right: 18px;
                bottom: calc(var(--footer-h) + var(--fab-bottom-base) + calc(var(--fab-vertical-gap) * 2));
                z-index: 1500 !important;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
                background: #fff;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0 0 0 0);
            white-space: nowrap;
            border: 0;
        }

        .file-input {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0 0 0 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }

        body.panel-open .add-more-btn,
        body.panel-open #open-settings,
        body.panel-open #convert-btn-mobile {
            z-index: 1500 !important;
        }

        .paper-page {
            background: white;
            border-radius: 4px;
            box-shadow: 0 6px 20px rgba(136, 135, 135, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            transition: all 0.3s;
        }

        .paper-page img {
            display: block;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .thumbnail-actions {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.18s;
        }

        .thumbnail-container:hover .thumbnail-actions,
        .paper-page:hover .thumbnail-actions {
            opacity: 1;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
            cursor: pointer;
        }

        .option-card {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
        }

        .option-card.selected {
            border-color: #ef4444;
            background: #fef2f2;
        }

        .thumbnail-container {
            position: relative;
            transition: transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1),
                box-shadow 180ms, opacity 120ms;
            cursor: grab;
        }

        .thumbnail-container.dragging {
            cursor: grabbing;
            opacity: 0.6;
            transform: scale(0.98);
        }

        .thumbnail-container.drag-over {
            transform: translateY(-6px) scale(1.02);
        }

        /* new sections */

        .pdf-sections {
            max-width: 1200px;
            margin: 48px auto;
            padding: 0 18px;
            font-family: Inter, system-ui, sans-serif;
            color: #111827;
        }

        .section-head {
            text-align: center;
            margin-bottom: 24px;
        }

        .section-head h2 {
            font-size: 1.6rem;
            font-weight: 700;
            margin: 0;
        }

        /* Steps */
        .steps-3-wrap {
            text-align: center;
            margin-top: 18px;
        }

        .steps-3-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 36px;
            align-items: start;
        }

        @media (max-width: 980px) {
            .steps-3-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 560px) {
            .steps-3-grid {
                grid-template-columns: 1fr;
            }
        }

        .step-inner {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 12px;
        }

        .step-badge {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #ef4444;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.15);
        }

        .step-title {
            font-weight: 700;
            font-size: 1rem;
            margin: 4px 0;
        }

        .step-desc {
            margin: 0;
            color: #6b7280;
            font-size: 0.93rem;
            line-height: 1.6;
        }

        /* Explore Tools */
        .card-grid {
            margin-top: 24px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 18px;
        }

        .tool-link {
            text-decoration: none;
            color: inherit;
        }

        .tool-card {
            background: #fff;
            border: 1px solid #eef2f6;
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 6px 18px rgba(2, 6, 23, 0.03);
            display: flex;
            gap: 14px;
            align-items: flex-start;
            transition: transform .16s ease, box-shadow .16s ease;
        }

        .tool-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 36px rgba(2, 6, 23, 0.06);
        }

        .tool-icon {
            min-width: 48px;
            min-height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            color: #0f172a;
        }

        .icon-blue {
            background: rgba(37, 99, 235, 0.08);
        }

        .icon-red {
            background: rgba(239, 68, 68, 0.08);
        }

        .icon-orange {
            background: rgba(234, 88, 12, 0.08);
        }

        .icon-green {
            background: rgba(5, 150, 105, 0.08);
        }

        .icon-purple {
            background: rgba(124, 58, 237, 0.08);
        }

        .tool-card h3 {
            margin: 0 0 6px 0;
            font-size: 0.98rem;
            font-weight: 700;
            color: #0f172a;
        }

        .tool-card p {
            margin: 0;
            color: #6b7280;
            font-size: 0.92rem;
            line-height: 1.55;
        }

        /* Info sections */
        .info-text {
            /* max-width: 900px; */
            margin: 0 auto;
            text-align: center;
            color: #374151;
            line-height: 1.7;
            font-size: 0.96rem;
        }

        .info-list {
            /* max-width: 800px; */
            margin: 0 auto;
            padding-left: 20px;
            color: #374151;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .article-wrap {
            /* max-width: 900px; */
            margin: 0 auto;
            line-height: 1.7;
            color: #374151;
            font-size: 0.95rem;
        }

        @media (max-width:420px) {
            .tool-card {
                padding: 14px;
                gap: 12px;
            }

            .tool-icon {
                min-width: 48px;
                min-height: 48px;
            }
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57TC57Z3"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <!-- mobile sidebar -->
    <div id="mobile-sidebar" class="mobile-sidebar" aria-hidden="true">
        <button id="mobile-sidebar-close" class="close">✕</button>
        <nav>
            <a href="https://www.pdf99.org/">Home</a>
            <a href="pdf-converter">PDF Converter</a>
            <a href="compress-pdf">Compress PDF</a>
            <a href="merge-pdf">Merge PDF</a>

            <hr style="margin: 12px 0; border: none; border-top: 1px solid #eef2f6" />

            <div>
                <div id="mobile-more-toggle" class="mobile-more-toggle">
                    <span>More</span>
                    <i id="mobile-more-icon" class="fas fa-chevron-down"></i>
                </div>
                <div id="mobile-more-list" class="mobile-more-list">
                    <a href="jpg-to-pdf">JPG to PDF</a>
                    <a href="split-pdf">Split PDF</a>
                </div>
            </div>
        </nav>
    </div>

    <div id="overlay" class="overlay" aria-hidden="true"></div>

    <!-- NAV -->
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-inner">
            <div class="nav-left">
                <div class="brand">
                    <!-- <h1 class="text-2xl font-bold text-red-600">PDF99</h1> -->
                    <a href="/" class="text-2xl font-bold text-red-600">PDF99</a>
                </div>
            </div>

            <div class="nav-center" aria-hidden="false">
                <div class="nav-links">
                    <a href="https://www.pdf99.org/" class="hover:text-red-600">Home</a>
                    <a href="pdf-converter" class="hover:text-red-600">PDF Converter</a>
                    <a href="compress-pdf" class="hover:text-red-600">Compress PDF</a>
                    <a href="merge-pdf" class="hover:text-red-600">Merge PDF</a>
                </div>
            </div>

            <div class="nav-right">
                <div class="more-dropdown" id="more-dropdown">
                    <button id="more-dropdown-toggle" class="px-2 py-1 inline-flex items-center gap-2"
                        aria-haspopup="true" aria-expanded="false">
                        More
                        <i class="fas fa-chevron-down" style="font-size: 12px" aria-hidden="true"></i>
                    </button>
                    <div id="more-dropdown-menu" class="more-dropdown-menu" aria-hidden="true">
                        <a href="jpg-to-pdf">JPG to PDF</a>
                        <a href="split-pdf">Split PDF</a>
                    </div>
                </div>

                <button id="mobile-hamburger" class="mobile-hamburger" aria-label="Open menu">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- main content -->
    <div class="page-wrap">
        <main>
            <!-- Upload -->
            <div id="upload-screen" class="flex flex-col items-center justify-center py-16">
                <h1 class="text-3xl font-bold text-center mb-6">Split PDF</h1>
                <p class="text-gray-600 text-center mb-8">
                    Upload a PDF and split or extract its pages. Reorder thumbnails by
                    dragging, then export.
                </p>

                <div id="drop-area"
                    class="relative border-2 border-dashed border-gray-300 rounded-xl p-12 text-center bg-white max-w-md w-full">
                    <label for="file-input" class="cursor-pointer">
                        <div
                            class="bg-red-600 text-white font-medium py-3 px-6 rounded-full shadow-md hover:bg-red-700 transition mb-4">
                            Select PDF
                        </div>
                        <p class="text-gray-500">- or drop a PDF file here -</p>
                    </label>

                    <!-- single file input -->
                    <input id="file-input" class="file-input" type="file" accept="application/pdf" />
                </div>

                <div class="flex justify-center space-x-6 mt-8">
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-file-pdf text-gray-600"></i>
                    </div>
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-cut text-gray-600"></i>
                    </div>
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-download text-gray-600"></i>
                    </div>
                </div>

                <!-- ===== HTML for Split PDF page ===== -->
                <div class="pdf-sections">

                    <!-- Steps -->
                    <section>
                        <div class="section-head mt-20">
                            <h2>How to Split PDF Files</h2>
                        </div>

                        <div class="steps-3-wrap">
                            <div class="steps-3-grid">
                                <div class="step-inner">
                                    <div class="step-badge">1</div>
                                    <div class="step-title">Upload PDF</div>
                                    <p class="step-desc">Choose the PDF you want to split - large or small files are
                                        supported.</p>
                                </div>

                                <div class="step-inner">
                                    <div class="step-badge">2</div>
                                    <div class="step-title">Select pages</div>
                                    <p class="step-desc">Pick specific pages or page ranges to extract into new PDF
                                        files.</p>
                                </div>

                                <div class="step-inner">
                                    <div class="step-badge">3</div>
                                    <div class="step-title">Split & download</div>
                                    <p class="step-desc">Download your split PDFs instantly. Each file is created
                                        exactly as selected.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    

                    <!-- What is Split PDF -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>What is PDF Splitting?</h2>
                        </div>
                        <p class="info-text">
                            PDF splitting is basically breaking up a large PDF file into smaller, separate documents. Think of it like cutting a big book into individual chapters. When you split PDF files, you can choose exactly which pages you want to keep and create new files from them. A PDF splitter is a handy tool that makes this process quick and painless. Maybe you have a 50-page report but only need pages 10-15, or perhaps you want to extract pages from PDF documents to share just one section with someone. The ability to cut PDF files into smaller pieces means you don't have to send massive documents when only a few pages matter. Instead of forcing someone to download and scroll through everything, you can use a PDF splitter to create focused files. Whether you need to extract pages from PDF reports, presentations, or ebooks, the PDF split function gives you complete control. You can cut PDF documents down to exactly what's needed, making file sharing much more efficient for everyone involved.
                        </p>
                    </section>

                    <!-- Why Split -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Why Split PDFs?</h2>
                        </div>
                        <ul class="info-list">
                            <li><strong>Extract chapters:</strong> Pull out specific sections from books, reports, or manuals without keeping everything else you don't need.</li>
                            <li><strong>Reorganize content:</strong> Break documents apart so you can rearrange them, file them separately, or use them in different projects.</li>
                            <li><strong>Share efficiently:</strong> Send people just the pages they actually need instead of making them download huge files.</li>
                            <li><strong>Save storage:</strong> Keep your folders cleaner with smaller, focused files instead of one giant document taking up space.</li>
                        </ul>
                    </section>

                    <!-- Article -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Split PDF - Complete Guide</h2>
                        </div>
                        <div class="article-wrap">
                            <p>We all deal with large PDF files sometimes-whether it's a lengthy work report, a scanned document bundle, or a digital book. That's where a good PDF splitter comes in handy. With PDF99's split PDF tool, you can quickly pick out the pages you want and save them as separate files. It works right in your browser, keeps your files private, and doesn't require any complicated software downloads. When you need to extract pages from PDF files for work presentations or want to cut PDF documents into more manageable pieces, it's straightforward and fast. The PDF split feature handles everything from single-page extraction to complex range selections, making it easy to organize your documents however you need them.</p>

                            <h3>Best practices</h3>
                            <ol>
                                <li><strong>Preview pages:</strong> Always double-check you're grabbing the right pages before you split PDF files to avoid having to redo the work.</li>
                                <li><strong>Use ranges:</strong> When you want multiple pages together, use page ranges (like 5-10) in your PDF splitter to keep related content in one file.</li>
                                <li><strong>Combine after split:</strong> Sometimes it helps to extract pages from PDF documents first, then merge the pieces back together in a new order that makes more sense for your project.</li>
                                <li><strong>Compress after split:</strong> Once you've used the PDF split function to create smaller parts, run them through a compressor to make them even lighter for emailing or uploading to shared drives.</li>
                                <li><strong>Name files clearly:</strong> When you cut PDF files into multiple documents, give each one a descriptive name so you can find what you need later without opening every file.</li>
                            </ol>

                            <h3>When to use</h3>
                            <p>You'll want to split PDF documents in tons of everyday situations. Maybe you're a student who needs to extract pages from PDF textbooks for study notes or assignment submissions. Or you're in accounting and need to use a PDF splitter to separate individual invoices from a monthly batch file. It's perfect for breaking down big scanned documents into organized folders by topic or date. When you're working on a project and only need certain sections from a larger file, the ability to cut PDF documents saves you from dealing with unnecessary pages. Lawyers often need to extract pages from PDF contracts to share specific clauses with clients. Teachers use PDF split tools to pull out individual worksheets from curriculum guides. Business professionals cut PDF reports to share relevant sections with different departments. Basically, anytime you find yourself thinking "I wish I only had pages 12-18 of this document," that's when a PDF splitter saves the day. It's especially useful in offices, schools, legal firms, and anywhere people work with documents regularly and need precise control over what they share and store.</p>
                        </div>
                    </section>

                    <!-- Explore Tools -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Explore Other PDF Tools</h2>
                        </div>

                        <div class="card-grid">
                            <a href="pdf-converter" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-blue"><i class="fas fa-file-pdf"></i></div>
                                    <div>
                                        <h3>PDF Converter</h3>
                                        <p>Convert Word, Excel, PPT, and images to PDF and back - preserve formatting
                                            and layout.</p>
                                    </div>
                                </div>
                            </a>

                            <a href="merge-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-red"><i class="fas fa-layer-group"></i></div>
                                    <div>
                                        <h3>Merge PDF</h3>
                                        <p>Combine multiple PDFs into one document. Reorder, preview, and merge in
                                            seconds.</p>
                                    </div>
                                </div>
                            </a>

                            <a href="compress-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-green"><i class="fas fa-compress-alt"></i></div>
                                    <div>
                                        <h3>Compress PDF</h3>
                                        <p>Reduce file size while keeping quality. Choose between balanced or strong
                                            compression.</p>
                                    </div>
                                </div>
                            </a>

                            <a href="jpg-to-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-purple"><i class="fas fa-image"></i></div>
                                    <div>
                                        <h3>JPG to PDF</h3>
                                        <p>Convert JPG and PNG images into PDFs. Merge images into one file or export
                                            separately.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </section>

                </div>
            </div>

            <!-- Preview -->
            <div id="preview-screen" class="hidden">
                <div class="main-content">
                    <div style="display: flex; gap: 18px; position: relative">
                        <div class="thumbnails-section mt-10 mb-10" style="flex: 1">
                            <div id="thumbnails-container" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2">
                            </div>
                        </div>

                        <div class="settings-section settings-panel" id="settings-panel" aria-hidden="false">
                            <div class="content-padding-bottom">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold">Split options</h3>
                                    <button id="close-settings" class="md:hidden text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-times text-xl" aria-hidden="true"></i>
                                    </button>
                                </div>

                                <div class="space-y-6">
                                    <div>
                                        <h4 class="font-medium mb-3">Mode</h4>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div id="mode-all" class="option-card selected" data-mode="all">
                                                <div class="text-center">Extract all pages</div>
                                            </div>
                                            <div id="mode-selected" class="option-card" data-mode="selected">
                                                <div class="text-center">Extract selected pages</div>
                                            </div>
                                        </div>
                                        <div style="margin-top: 8px">
                                            <input id="selected-pages-input" type="text"
                                                placeholder="Pages: e.g. 1,3,5-7"
                                                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 mt-3"
                                                style="display: none" />
                                        </div>
                                    </div>

                                    <div>
                                        <h4 class="font-medium mb-3">Merge option</h4>
                                        <div class="flex items-center">
                                            <input id="merge-pdf" type="checkbox"
                                                class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"
                                                checked />
                                            <label for="merge-pdf" class="ml-2 block text-sm text-gray-900">Merge
                                                extracted pages into one PDF</label>
                                        </div>
                                    </div>

                                    <button id="convert-btn-desktop"
                                        class="hidden md:block bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center">
                                        <span>Split PDF</span><i class="fas fa-download ml-2" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="convert-btn-mobile"
                    class="convert-btn bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center md:hidden">
                    <span>Split PDF</span><i class="fas fa-download ml-2" aria-hidden="true"></i>
                </button>

                <button id="open-settings" class="md:hidden" aria-label="Open settings">
                    <i class="fas fa-cog text-gray-700 text-xl" aria-hidden="true"></i>
                </button>
            </div>

            <!-- Download Screen -->
            <div id="download-screen" class="hidden py-16 text-center">
                <h2 class="text-3xl font-bold mb-6">Your pages are ready</h2>
                <div class="bg-white rounded-xl shadow-sm p-8 max-w-md mx-auto mb-8">
                    <h3 class="text-xl font-semibold mb-6">Download</h3>
                    <button id="download-pdf"
                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-8 rounded-full shadow-md mb-6">
                        Download File(s)
                    </button>

                    <div id="download-file-list" class="text-sm text-gray-700"></div>

                    <div class="flex justify-center space-x-4 mb-8">
                        <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-eye text-gray-600" aria-hidden="true"></i>
                        </button>
                        <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-pen text-gray-600" aria-hidden="true"></i>
                        </button>
                        <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-link text-gray-600" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>

                <div class="max-w-md mx-auto flex justify-center space-x-4">
                    <button id="back-to-edit" class="text-red-600 hover:text-red-800 font-medium">
                        ← Back to edit
                    </button>
                    <button id="convert-more" class="text-red-600 hover:text-red-800 font-medium">
                        Split more files →
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- footer -->
    <footer class="site-footer">
        <div class="text-sm text-gray-700">©
            <script>
                document.write(new Date().getFullYear());
            </script>
            PDF99 - All rights reserved.
    </footer>

    <!-- Converting overlay -->
    <div id="converting-overlay" aria-hidden="true" style="
        display: none;
        position: fixed;
        inset: 0;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.95);
        z-index: 1400;
        flex-direction: column;
      ">
        <div style="
          width: 92%;
          max-width: 520px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
        ">
            <div style="width: 140px; height: 140px; position: relative">
                <svg width="140" height="140" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="gradient" x1="0%" x2="100%">
                            <stop offset="0%" stop-color="#ef4444" />
                            <stop offset="100%" stop-color="#fb7185" />
                        </linearGradient>
                    </defs>
                    <circle class="ring-bg" cx="70" cy="70" r="52" fill="none" stroke="#f3f4f6" stroke-width="10">
                    </circle>
                    <circle id="ring-fg" class="ring-fg" cx="70" cy="70" r="52" fill="none" stroke="url(#gradient)"
                        stroke-width="10" stroke-dasharray="326.725" stroke-dashoffset="326.725"></circle>
                </svg>
                <div style="
              position: absolute;
              left: 0;
              right: 0;
              top: 0;
              bottom: 0;
              display: flex;
              align-items: center;
              justify-content: center;
              flex-direction: column;
              pointer-events: none;
            ">
                    <div id="ring-percent" style="font-size: 20px; font-weight: 700; color: #111827">
                        0%
                    </div>
                    <div id="ring-status" style="font-size: 13px; color: #6b7280; margin-top: 6px">
                        Preparing
                    </div>
                </div>
            </div>
            <div style="text-align: center; color: #111827; font-weight: 600">
                Splitting, please wait...
            </div>
        </div>
    </div>

    <!-- JS: UI + split logic -->
    <script>
        (function () {
            const moreToggle = document.getElementById("more-dropdown-toggle");
            const moreMenu = document.getElementById("more-dropdown-menu");
            if (moreToggle) {
                moreToggle.addEventListener("click", (e) => {
                    e.stopPropagation();
                    moreMenu.classList.toggle("open");
                });
                document.addEventListener("click", () =>
                    moreMenu.classList.remove("open")
                );
            }

            const mobileHamburger = document.getElementById("mobile-hamburger");
            const mobileSidebar = document.getElementById("mobile-sidebar");
            const mobileSidebarClose = document.getElementById(
                "mobile-sidebar-close"
            );
            const overlay = document.getElementById("overlay");

            mobileHamburger &&
                mobileHamburger.addEventListener("click", () => {
                    mobileSidebar.classList.add("open");
                    mobileSidebar.setAttribute("aria-hidden", "false");
                    overlay.classList.add("open");
                    document.body.classList.add("panel-open");
                });
            mobileSidebarClose &&
                mobileSidebarClose.addEventListener("click", () => {
                    mobileSidebar.classList.remove("open");
                    mobileSidebar.setAttribute("aria-hidden", "true");
                    overlay.classList.remove("open");
                    document.body.classList.remove("panel-open");
                });

            overlay &&
                overlay.addEventListener("click", () => {
                    mobileSidebar && mobileSidebar.classList.remove("open");
                    document.querySelector(".settings-panel") &&
                        document
                            .querySelector(".settings-panel")
                            .classList.remove("open");
                    overlay.classList.remove("open");
                    document.body.classList.remove("panel-open");
                });

            document.addEventListener("keydown", (e) => {
                if (e.key === "Escape") {
                    document.getElementById("more-dropdown-menu") &&
                        document
                            .getElementById("more-dropdown-menu")
                            .classList.remove("open");
                    mobileSidebar && mobileSidebar.classList.remove("open");
                    document.querySelector(".settings-panel") &&
                        document
                            .querySelector(".settings-panel")
                            .classList.remove("open");
                    overlay && overlay.classList.remove("open");
                    document.body.classList.remove("panel-open");
                }
            });
        })();

        // ===== app JS =====
        const state = {
            fileObj: null,
            pages: [], // { pageNumber, estimatedSize, thumbDataUrl, thumbW, thumbH }
            order: [],
            mode: "all",
            selectedPagesInput: "",
            merge: true,
            outputs: [],
        };

        const fileInput = document.getElementById("file-input");
        const thumbnailsContainer = document.getElementById(
            "thumbnails-container"
        );
        const convertBtnMobile = document.getElementById("convert-btn-mobile");
        const convertBtnDesktop = document.getElementById("convert-btn-desktop");
        const downloadPdfBtn = document.getElementById("download-pdf");
        const backToEditBtn = document.getElementById("back-to-edit");
        const convertMoreBtn = document.getElementById("convert-more");
        const modeAll = document.getElementById("mode-all");
        const modeSelected = document.getElementById("mode-selected");
        const selectedPagesInput = document.getElementById(
            "selected-pages-input"
        );
        const mergeCheckbox = document.getElementById("merge-pdf");
        const convertingOverlay = document.getElementById("converting-overlay");
        const ringFg = document.getElementById("ring-fg");
        const ringPercentEl = document.getElementById("ring-percent");
        const ringStatusEl = document.getElementById("ring-status");
        const downloadFileList = document.getElementById("download-file-list");
        const openSettingsBtnRef = document.getElementById("open-settings");
        const closeSettingsBtnRef = document.getElementById("close-settings");
        const settingsPanelRef = document.querySelector(".settings-panel");
        const overlayRef = document.getElementById("overlay");

        const jsPDF =
            window.jspdf && window.jspdf.jsPDF ? window.jspdf.jsPDF : null;

        let dragSrcIndex = null;

        document.addEventListener("DOMContentLoaded", init);

        function init() {
            setupListeners();
            modeAll && modeAll.classList.add("selected");
            mergeCheckbox && (mergeCheckbox.checked = true);
            // ensure selected-pages input hidden initially
            if (selectedPagesInput) selectedPagesInput.style.display = "none";
        }

        function setupListeners() {
            fileInput && fileInput.addEventListener("change", handleFileSelect);
            const dropArea = document.getElementById("drop-area");
            ["dragenter", "dragover", "dragleave", "drop"].forEach(
                (evt) =>
                    dropArea && dropArea.addEventListener(evt, preventDefaults, false)
            );
            ["dragenter", "dragover"].forEach(
                (evt) => dropArea && dropArea.addEventListener(evt, highlight, false)
            );
            ["dragleave", "drop"].forEach(
                (evt) =>
                    dropArea && dropArea.addEventListener(evt, unhighlight, false)
            );
            dropArea && dropArea.addEventListener("drop", handleDrop, false);

            modeAll &&
                modeAll.addEventListener("click", () => handleModeSelect("all"));
            modeSelected &&
                modeSelected.addEventListener("click", () =>
                    handleModeSelect("selected")
                );
            selectedPagesInput &&
                selectedPagesInput.addEventListener("input", (e) => {
                    state.selectedPagesInput = e.target.value;
                });

            mergeCheckbox &&
                mergeCheckbox.addEventListener("change", (e) => {
                    state.merge = e.target.checked;
                });

            convertBtnMobile &&
                convertBtnMobile.addEventListener("click", handleSplit);
            convertBtnDesktop &&
                convertBtnDesktop.addEventListener("click", handleSplit);

            downloadPdfBtn &&
                downloadPdfBtn.addEventListener("click", handleDownload);
            backToEditBtn &&
                backToEditBtn.addEventListener("click", () => {
                    document.getElementById("download-screen").classList.add("hidden");
                    document
                        .getElementById("preview-screen")
                        .classList.remove("hidden");
                });
            convertMoreBtn && convertMoreBtn.addEventListener("click", resetApp);

            openSettingsBtnRef &&
                openSettingsBtnRef.addEventListener("click", () => {
                    settingsPanelRef && settingsPanelRef.classList.add("open");
                    overlayRef && overlayRef.classList.add("open");
                    document.body.classList.add("panel-open");
                });
            closeSettingsBtnRef &&
                closeSettingsBtnRef.addEventListener("click", () => {
                    settingsPanelRef && settingsPanelRef.classList.remove("open");
                    overlayRef && overlayRef.classList.remove("open");
                    document.body.classList.remove("panel-open");
                });
            overlayRef &&
                overlayRef.addEventListener("click", () => {
                    settingsPanelRef && settingsPanelRef.classList.remove("open");
                    overlayRef && overlayRef.classList.remove("open");
                    document.body.classList.remove("panel-open");
                });
        }

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        function highlight() {
            const dropArea = document.getElementById("drop-area");
            dropArea && dropArea.classList.add("border-red-500", "bg-red-50");
        }
        function unhighlight() {
            const dropArea = document.getElementById("drop-area");
            dropArea && dropArea.classList.remove("border-red-500", "bg-red-50");
        }
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const f = dt.files && dt.files[0] ? dt.files[0] : null;
            handleFileInput(f);
        }

        async function handleFileSelect(e) {
            const f =
                e.target.files && e.target.files[0] ? e.target.files[0] : null;
            await handleFileInput(f);
            e.target.value = "";
        }

        // convert dataURL -> Blob (utility)
        function dataURLToBlob(dataurl) {
            const arr = dataurl.split(","),
                mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]),
                n = bstr.length,
                u8arr = new Uint8Array(n);
            for (let i = 0; i < n; i++) u8arr[i] = bstr.charCodeAt(i);
            return new Blob([u8arr], { type: mime });
        }

        // handle upload: render each page to a thumbnail image (client-side) so thumbnails show actual page images
        async function handleFileInput(file) {
            if (!file) return;
            if (
                !(
                    file.type === "application/pdf" ||
                    file.name.toLowerCase().endsWith(".pdf")
                )
            ) {
                alert("Please upload a PDF file.");
                return;
            }
            try {
                const arrayBuffer = await file.arrayBuffer();
                const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });
                const pdfDoc = await loadingTask.promise;
                const numPages = pdfDoc.numPages || 0;

                state.fileObj = { file, arrayBuffer, numPages, origSize: file.size };
                state.pages = [];
                state.order = [];

                // render thumbnails (smaller width) for every page so we can show page images in thumbnails
                const thumbTargetWidth = 800; // reasonable width for thumbnails (will be downscaled in UI)
                for (let p = 1; p <= numPages; p++) {
                    try {
                        const page = await pdfDoc.getPage(p);
                        const viewport = page.getViewport({ scale: 1 });
                        const scale = Math.max(0.5, thumbTargetWidth / viewport.width);
                        const vp = page.getViewport({ scale });
                        const canvas = document.createElement("canvas");
                        canvas.width = Math.round(vp.width);
                        canvas.height = Math.round(vp.height);
                        const ctx = canvas.getContext("2d");
                        await page.render({ canvasContext: ctx, viewport: vp }).promise;

                        // use JPEG thumbnail to keep size small
                        const dataUrl = canvas.toDataURL("image/jpeg", 0.8);
                        const blob = dataURLToBlob(dataUrl);
                        const estimatedSize =
                            blob.size ||
                            Math.max(1, Math.round(file.size / Math.max(1, numPages)));

                        state.pages.push({
                            pageNumber: p,
                            estimatedSize,
                            thumbDataUrl: dataUrl,
                            thumbW: canvas.width,
                            thumbH: canvas.height,
                        });
                        state.order.push(p);

                        try {
                            page.cleanup && page.cleanup();
                        } catch (e) { }
                    } catch (errPage) {
                        console.warn("Thumbnail render failed for page", p, errPage);
                        // fallback entry
                        state.pages.push({
                            pageNumber: p,
                            estimatedSize: Math.max(
                                1,
                                Math.round(file.size / Math.max(1, numPages))
                            ),
                            thumbDataUrl: null,
                            thumbW: 0,
                            thumbH: 0,
                        });
                        state.order.push(p);
                    }
                }

                try {
                    pdfDoc.destroy && pdfDoc.destroy();
                } catch (e) { }

                document.getElementById("upload-screen").classList.add("hidden");
                document.getElementById("preview-screen").classList.remove("hidden");
                renderThumbnails();
            } catch (err) {
                console.error("Failed to read PDF", err);
                alert("Failed to read PDF. Try again with a different file.");
            }
        }

        function renderThumbnails() {
            if (!thumbnailsContainer) return;
            thumbnailsContainer.innerHTML = "";
            const pageObjs = state.order
                .map((n) => state.pages.find((p) => p.pageNumber === n))
                .filter(Boolean);
            const thumbWidth = 160;
            // compute a thumbnail height using average aspect ratio from first available page
            pageObjs.forEach((pObj, index) => {
                const container = document.createElement("div");
                container.className = "thumbnail-container relative";
                container.draggable = true;
                container.dataset.index = index;
                container.style.minHeight = "260px";

                container.addEventListener("dragstart", (e) => {
                    dragSrcIndex = index;
                    container.classList.add("dragging");
                    e.dataTransfer.effectAllowed = "move";
                    try {
                        const tiny = document.createElement("canvas");
                        tiny.width = 140;
                        tiny.height = 200;
                        const ctx = tiny.getContext("2d");
                        ctx.fillStyle = "#fff";
                        ctx.fillRect(0, 0, tiny.width, tiny.height);
                        ctx.fillStyle = "#ef4444";
                        ctx.font = "20px Inter, sans-serif";
                        ctx.textAlign = "center";
                        ctx.fillText(
                            "Page " + pObj.pageNumber,
                            tiny.width / 2,
                            tiny.height / 2
                        );
                        e.dataTransfer.setDragImage(
                            tiny,
                            tiny.width / 2,
                            tiny.height / 2
                        );
                    } catch (err) {
                        const tiny = document.createElement("canvas");
                        tiny.width = 1;
                        tiny.height = 1;
                        e.dataTransfer.setDragImage(tiny, 0, 0);
                    }
                    e.dataTransfer.setData("text/plain", "");
                });

                container.addEventListener("dragover", (e) => {
                    e.preventDefault();
                    container.classList.add("drag-over");
                    e.dataTransfer.dropEffect = "move";
                });
                container.addEventListener("dragleave", () => {
                    container.classList.remove("drag-over");
                });
                container.addEventListener("drop", (e) => {
                    e.preventDefault();
                    container.classList.remove("drag-over");
                    const destIndex = index;
                    if (dragSrcIndex === null) return;
                    if (destIndex !== dragSrcIndex) {
                        const [moved] = state.order.splice(dragSrcIndex, 1);
                        state.order.splice(destIndex, 0, moved);
                    }
                    dragSrcIndex = null;
                    document
                        .querySelectorAll(".thumbnail-container.dragging")
                        .forEach((el) => el.classList.remove("dragging"));
                    renderThumbnails();
                });
                container.addEventListener("dragend", () => {
                    dragSrcIndex = null;
                    container.classList.remove("dragging");
                    document
                        .querySelectorAll(".thumbnail-container")
                        .forEach((el) => el.classList.remove("drag-over"));
                });

                const inner = document.createElement("div");
                inner.className = "paper-page mb-3";
                inner.style.width = thumbWidth + "px";
                inner.style.height = "220px";
                inner.style.margin = "0 auto";
                inner.style.position = "relative";
                inner.style.overflow = "hidden";

                if (pObj.thumbDataUrl) {
                    const imgEl = document.createElement("img");
                    imgEl.src = pObj.thumbDataUrl;
                    imgEl.alt = "Page " + pObj.pageNumber;
                    imgEl.loading = "lazy";
                    imgEl.style.maxWidth = "100%";
                    imgEl.style.maxHeight = "100%";
                    imgEl.style.display = "block";
                    inner.appendChild(imgEl);
                } else {
                    // fallback PDF icon
                    const pdfIcon = document.createElement("div");
                    pdfIcon.className = "pdf-icon";
                    pdfIcon.innerHTML = '<i class="fas fa-file-pdf"></i>';
                    inner.appendChild(pdfIcon);
                }

                const actions = document.createElement("div");
                actions.className = "thumbnail-actions";
                actions.style.top = "8px";
                actions.style.right = "8px";

                const removeBtn = document.createElement("div");
                removeBtn.className = "action-btn remove-btn";
                removeBtn.title = "Remove file";
                removeBtn.innerHTML = '<i class="fas fa-trash text-gray-700"></i>';
                removeBtn.addEventListener("click", (ev) => {
                    ev.stopPropagation();
                    if (confirm("Remove the uploaded PDF?")) {
                        resetApp();
                    }
                });
                actions.appendChild(removeBtn);
                inner.appendChild(actions);

                const meta = document.createElement("div");
                meta.className = "text-center mt-2";
                const sizeTxt = formatFileSize(pObj.estimatedSize || 0);
                meta.innerHTML = `<p class="text-sm font-medium truncate">Page ${pObj.pageNumber}</p><p class="text-xs text-gray-500">${sizeTxt}</p>`;

                container.appendChild(inner);
                container.appendChild(meta);
                thumbnailsContainer.appendChild(container);
            });
        }

        function formatFileSize(bytes) {
            if (!bytes) return "0 B";
            if (bytes === 0) return "0 Bytes";
            const k = 1024;
            const sizes = ["Bytes", "KB", "MB", "GB"];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
        }

        function handleModeSelect(mode) {
            state.mode = mode;
            modeAll && modeAll.classList.toggle("selected", mode === "all");
            modeSelected &&
                modeSelected.classList.toggle("selected", mode === "selected");
            // show/hide input
            if (selectedPagesInput)
                selectedPagesInput.style.display =
                    mode === "selected" ? "block" : "none";
        }

        function parsePagesInput(input, maxPages) {
            if (!input) return [];
            const parts = input
                .split(",")
                .map((s) => s.trim())
                .filter(Boolean);
            const set = new Set();
            for (const p of parts) {
                if (p.includes("-")) {
                    const [a, b] = p
                        .split("-")
                        .map((x) => parseInt(x.trim(), 10))
                        .filter((n) => !isNaN(n));
                    if (!isNaN(a) && !isNaN(b)) {
                        const start = Math.max(1, Math.min(a, b));
                        const end = Math.min(maxPages, Math.max(a, b));
                        for (let i = start; i <= end; i++) set.add(i);
                    }
                } else {
                    const n = parseInt(p, 10);
                    if (!isNaN(n) && n >= 1 && n <= maxPages) set.add(n);
                }
            }
            return Array.from(set).sort((a, b) => a - b);
        }

        function runRingAnimation(durationMs) {
            return new Promise((resolve) => {
                const radius = 52;
                const circumference = 2 * Math.PI * radius;
                ringFg && (ringFg.style.strokeDasharray = circumference.toString());
                let start = performance.now();
                function tick(now) {
                    const elapsed = now - start;
                    const t = Math.min(1, elapsed / durationMs);
                    const percent = Math.floor(t * 100);
                    const offset = circumference * (1 - t);
                    ringFg && (ringFg.style.strokeDashoffset = offset.toString());
                    ringPercentEl && (ringPercentEl.textContent = percent + "%");
                    if (percent < 35)
                        ringStatusEl && (ringStatusEl.textContent = "Preparing");
                    else ringStatusEl && (ringStatusEl.textContent = "Splitting");
                    if (t < 1) requestAnimationFrame(tick);
                    else {
                        ringFg && (ringFg.style.strokeDashoffset = "0");
                        ringPercentEl && (ringPercentEl.textContent = "100%");
                        ringStatusEl && (ringStatusEl.textContent = "Splitting");
                        setTimeout(resolve, 250);
                    }
                }
                requestAnimationFrame(tick);
            });
        }

        function showConvertingOverlay() {
            ringFg && (ringFg.style.transition = "none");
            const radius = 52;
            const circumference = 2 * Math.PI * radius;
            ringFg && (ringFg.style.strokeDasharray = circumference.toString());
            ringFg && (ringFg.style.strokeDashoffset = circumference.toString());
            void ringFg && ringFg.offsetWidth;
            ringFg && (ringFg.style.transition = "stroke-dashoffset 140ms linear");
            ringPercentEl && (ringPercentEl.textContent = "0%");
            ringStatusEl && (ringStatusEl.textContent = "Preparing");
            convertingOverlay && (convertingOverlay.style.display = "flex");
        }
        function hideConvertingOverlay() {
            convertingOverlay && (convertingOverlay.style.display = "none");
        }

        async function handleSplit() {
            if (!state.fileObj) {
                alert("Please upload a PDF first.");
                return;
            }

            const numPages = state.fileObj.numPages;
            let pagesToExtract = [];

            if (state.mode === "selected") {
                const parsed = parsePagesInput(
                    state.selectedPagesInput || selectedPagesInput.value || "",
                    numPages
                );
                if (parsed.length === 0) {
                    alert("Please enter valid pages (e.g. 1,3,5-7).");
                    return;
                }
                pagesToExtract = parsed;
            } else {
                // use current order (reordered by user)
                pagesToExtract = state.order.slice();
            }

            const animationDuration = 5000;
            showConvertingOverlay();
            const animPromise = runRingAnimation(animationDuration);

            try {
                const arr = state.fileObj.arrayBuffer;
                const loadingTask = pdfjsLib.getDocument({ data: arr });
                const pdfDoc = await loadingTask.promise;

                const tempPages = [];

                // render each requested page at a decent resolution and produce PDF(s)
                for (let i = 0; i < pagesToExtract.length; i++) {
                    const pageNum = pagesToExtract[i];
                    try {
                        const page = await pdfDoc.getPage(pageNum);

                        // --- IMPORTANT FIX: preserve original page size in points ---
                        // get the original page viewport at scale = 1 (gives width/height in PDF points)
                        const baseViewport = page.getViewport({ scale: 1 });
                        const origWidthPts = baseViewport.width;
                        const origHeightPts = baseViewport.height;

                        // render at higher resolution for final PDF (keep your previous approach)
                        // targetWidth controls rendered pixel density; we keep it as before
                        const targetWidth = 1200;
                        const renderScale = Math.max(1, targetWidth / baseViewport.width);
                        const viewport = page.getViewport({ scale: renderScale });

                        const canvas = document.createElement("canvas");
                        canvas.width = Math.round(viewport.width);
                        canvas.height = Math.round(viewport.height);
                        const ctx = canvas.getContext("2d");
                        await page.render({ canvasContext: ctx, viewport }).promise;

                        // JPEG quality same as you used before (near-lossless)
                        const dataUrl = canvas.toDataURL("image/jpeg", 0.92);

                        // store rendered image + original page sizes (pts)
                        if (state.merge) {
                            tempPages.push({
                                dataUrl,
                                pixelWidth: canvas.width,
                                pixelHeight: canvas.height,
                                origWidthPts,
                                origHeightPts,
                                pageNum,
                            });
                        } else {
                            // create a single-page PDF but *preserve original page size in points*
                            const doc = new jsPDF({
                                unit: "pt",
                                format: [origWidthPts, origHeightPts],
                            });
                            // Add image sized to the original page points - this ensures physical page size matches original.
                            doc.addImage(
                                dataUrl,
                                "JPEG",
                                0,
                                0,
                                origWidthPts,
                                origHeightPts
                            );
                            const blob = doc.output("blob");
                            const nameBase = state.fileObj.file.name.replace(
                                /\.[^/.]+$/,
                                ""
                            );
                            tempPages.push({
                                name: `${nameBase}-page-${pageNum}.pdf`,
                                blob,
                            });
                        }

                        try {
                            page.cleanup && page.cleanup();
                        } catch (e) { }
                    } catch (errPage) {
                        console.warn("Page render failed", pageNum, errPage);
                    }
                    // be a tiny bit cooperative with UI
                    await new Promise((r) => setTimeout(r, 8));
                }

                try {
                    pdfDoc.destroy && pdfDoc.destroy();
                } catch (e) { }

                let finalOutputs = [];
                if (state.merge) {
                    if (tempPages.length > 0) {
                        const first = tempPages[0];
                        // Use original page pts for the first page to set the PDF page size
                        const doc = new jsPDF({
                            unit: "pt",
                            format: [first.origWidthPts, first.origHeightPts],
                        });
                        // add first image with original page pts dimensions
                        doc.addImage(
                            first.dataUrl,
                            "JPEG",
                            0,
                            0,
                            first.origWidthPts,
                            first.origHeightPts
                        );
                        for (let k = 1; k < tempPages.length; k++) {
                            const o = tempPages[k];
                            // add page using the original pts size for that page
                            doc.addPage([o.origWidthPts, o.origHeightPts]);
                            doc.addImage(o.dataUrl, "JPEG", 0, 0, o.origWidthPts, o.origHeightPts);
                        }
                        const blob = doc.output("blob");
                        const nameBase = state.fileObj.file.name.replace(/\.[^/.]+$/, "");
                        finalOutputs.push({
                            name: `${nameBase}-extracted-${timestampString()}.pdf`,
                            blob,
                            newSize: blob.size,
                        });
                    }
                } else {
                    finalOutputs = tempPages.map((o) => ({
                        name: o.name,
                        blob: o.blob,
                        newSize: o.blob.size,
                    }));
                }

                await animPromise;

                state.outputs = finalOutputs;
                hideConvertingOverlay();
                document.getElementById("preview-screen").classList.add("hidden");
                document.getElementById("download-screen").classList.remove("hidden");
                renderDownloadList();
            } catch (err) {
                console.error("Split error:", err);
                hideConvertingOverlay();
                alert("An error occurred while splitting. Please try again.");
            }
        }

        function renderDownloadList() {
            if (!downloadFileList) return;
            downloadFileList.innerHTML = "";
            if (!state.outputs || state.outputs.length === 0) {
                downloadFileList.innerHTML = "<div>No files generated.</div>";
                return;
            }
            state.outputs.forEach((o) => {
                const after = formatFileSize(o.newSize || 0);
                const line = document.createElement("div");
                line.style.marginBottom = "14px";
                line.innerHTML = `<div style="margin-bottom:4px;font-weight:600">${escapeHtml(
                    o.name
                )}</div><div style="font-size:13px;color:#6b7280">${after}</div>`;
                downloadFileList.appendChild(line);
            });
        }

        function handleDownload() {
            if (!state.outputs || state.outputs.length === 0) {
                alert("No file available to download.");
                return;
            }
            if (state.outputs.length === 1) {
                saveAs(state.outputs[0].blob, state.outputs[0].name);
            } else {
                const zip = new JSZip();
                state.outputs.forEach((o) => zip.file(o.name, o.blob));
                zip
                    .generateAsync({ type: "blob" })
                    .then((blob) =>
                        saveAs(blob, `split-pages-${timestampString()}.zip`)
                    );
            }
            downloadPdfBtn.innerHTML = "Downloading...";
            setTimeout(() => {
                downloadPdfBtn.innerHTML = "Download PDF";
            }, 1000);
        }

        function timestampString() {
            const now = new Date();
            return `${now.getFullYear()}${String(now.getMonth() + 1).padStart(
                2,
                "0"
            )}${String(now.getDate()).padStart(2, "0")}-${String(
                now.getHours()
            ).padStart(2, "0")}${String(now.getMinutes()).padStart(2, "0")}${String(
                now.getSeconds()
            ).padStart(2, "0")}`;
        }

        function resetApp() {
            state.fileObj = null;
            state.pages = [];
            state.order = [];
            state.mode = "all";
            state.selectedPagesInput = "";
            state.merge = true;
            state.outputs = [];
            selectedPagesInput && (selectedPagesInput.value = "");
            mergeCheckbox && (mergeCheckbox.checked = true);
            modeAll && modeAll.classList.add("selected");
            modeSelected && modeSelected.classList.remove("selected");
            if (selectedPagesInput) selectedPagesInput.style.display = "none";
            document.getElementById("download-screen").classList.add("hidden");
            document.getElementById("upload-screen").classList.remove("hidden");
            thumbnailsContainer && (thumbnailsContainer.innerHTML = "");
            downloadFileList && (downloadFileList.innerHTML = "");
        }

        function escapeHtml(text) {
            return (text + "").replace(
                /[&<>"']/g,
                (m) =>
                ({
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;",
                }[m])
            );
        }
    </script>

    <noscript>
        <div style="
          padding: 16px;
          background: #fff;
          border-radius: 8px;
          margin: 18px auto;
          max-width: 800px;
          text-align: center;
        ">
            This Split PDF tool runs in the browser using JavaScript. Please enable
            JavaScript to use the tool.
        </div>
    </noscript>
</body>

</html>