<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google Tag Manager (condensed) -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-57TC57Z3');</script>
    <!-- End Google Tag Manager -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KC8H85HKF1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-KC8H85HKF1');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Rotate PDF | Rotate PDF Pages Online Free - PDF99</title>
    <meta name="description"
        content="Rotate PDF pages permanently. Change page orientation (clockwise, counterclockwise) - all in your browser." />
    <meta name="keywords"
        content="rotate pdf, rotate pdf pages, pdf rotator, rotate pdf online, change pdf orientation, rotate pdf permanently, pdf page rotation" />
    <link rel="canonical" href="https://www.pdf99.org/rotate-pdf" />
    <meta name="robots" content="index,follow" />
    <meta name="theme-color" content="#ef4444" />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Rotate PDF | Rotate PDF Pages Online Free - PDF99" />
    <meta property="og:description"
        content="Rotate PDF pages permanently. Change page orientation (clockwise, counterclockwise) - all in your browser." />
    <meta property="og:url" content="https://www.pdf99.org/rotate-pdf" />
    <meta property="og:site_name" content="PDF99" />
    <meta property="og:image" content="https://www.pdf99.org/assets/og-image-rotate-pdf.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Rotate PDF | Rotate PDF Pages Online Free - PDF99" />
    <meta name="twitter:description"
        content="Rotate PDF pages permanently. Change page orientation (clockwise, counterclockwise) - all in your browser." />
    <meta name="twitter:image" content="https://www.pdf99.org/assets/og-image-rotate-pdf.png" />

    <!-- Performance hints -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
        as="style" />

    <!-- Favicon & manifest -->
    <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png" />
    <link rel="manifest" href="manifest.json" />

    <!-- Structured data (JSON-LD) for Rotate PDF -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "SoftwareApplication",
      "@id": "https://www.pdf99.org/rotate-pdf#software",
      "name": "Rotate PDF",
      "url": "https://www.pdf99.org/rotate-pdf",
      "description": "Rotate PDF pages permanently. Change orientation clockwise or counterclockwise - fast, secure, and done entirely in the browser.",
      "applicationCategory": "Utilities",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": "Rotate PDF pages, Rotate all pages, Rotate individual pages, Clockwise rotation, Counterclockwise rotation, 90-degree rotation, 180-degree rotation, Batch rotation, Browser-based processing, No file uploads",
      "screenshot": "https://www.pdf99.org/assets/og-image-rotate-pdf.png"
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://www.pdf99.org/rotate-pdf#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.pdf99.org/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Rotate PDF",
          "item": "https://www.pdf99.org/rotate-pdf"
        }
      ]
    },
    {
      "@type": "HowTo",
      "@id": "https://www.pdf99.org/rotate-pdf#how-to",
      "name": "How to Rotate a PDF Online",
      "description": "Change page orientation in three simple steps with individual or bulk rotation.",
      "totalTime": "PT2M",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Upload",
          "text": "Select the PDF file you want to rotate. All pages are supported.",
          "url": "https://www.pdf99.org/rotate-pdf#how-to",
          "position": 1,
          "image": "https://www.pdf99.org/assets/how-to-rotate-upload.jpg"
        },
        {
          "@type": "HowToStep",
          "name": "Rotate",
          "text": "Click on any page to rotate it clockwise, or use bulk controls to rotate all pages at once.",
          "url": "https://www.pdf99.org/rotate-pdf#how-to",
          "position": 2,
          "image": "https://www.pdf99.org/assets/how-to-rotate-settings.jpg"
        },
        {
          "@type": "HowToStep",
          "name": "Download",
          "text": "Download your rotated PDF instantly, with all pages permanently rotated.",
          "url": "https://www.pdf99.org/rotate-pdf#how-to",
          "position": 3,
          "image": "https://www.pdf99.org/assets/how-to-rotate-download.jpg"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "@id": "https://www.pdf99.org/rotate-pdf#faq",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Is my file uploaded to your servers when I rotate PDFs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No, all rotation happens locally in your browser. Your PDF files never leave your device, ensuring complete privacy and security."
          }
        },
        {
          "@type": "Question",
          "name": "Can I rotate all pages at once?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, you can rotate all pages clockwise or counterclockwise simultaneously using the bulk rotation buttons. You can also rotate individual pages by clicking on them."
          }
        },
        {
          "@type": "Question",
          "name": "What rotation angles are supported?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You can rotate pages by 90° clockwise, 90° counterclockwise, or 180°. The rotation is applied permanently to the PDF."
          }
        },
        {
          "@type": "Question",
          "name": "Will the PDF quality be affected by rotation?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No, rotation is lossless. The page orientation changes without any recompression or quality loss, as we modify the PDF's internal rotation metadata."
          }
        },
        {
          "@type": "Question",
          "name": "Can I rotate multiple PDFs at once?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, you can select and rotate multiple PDF files simultaneously. They will be processed individually and can be downloaded as separate files or in a single ZIP archive."
          }
        },
        {
          "@type": "Question",
          "name": "Is there a file size limit for rotation?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Since processing happens in your browser, the file size limit depends on your device's available memory. Most users successfully rotate PDFs up to 100MB without issues."
          }
        },
        {
          "@type": "Question",
          "name": "Do I need to create an account to rotate PDFs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "No account or registration is required. You can rotate PDF files instantly and for free without any sign-up."
          }
        },
        {
          "@type": "Question",
          "name": "Can I rotate password-protected PDFs?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Currently, we don't support password-protected PDFs. You'll need to remove the password protection first before rotating the file."
          }
        },
        {
          "@type": "Question",
          "name": "Will text remain selectable after rotation?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, text in your PDF remains selectable and searchable after rotation. We only modify the rotation metadata, preserving all content layers."
          }
        }
      ]
    },
    {
      "@type": "Product",
      "@id": "https://www.pdf99.org/rotate-pdf#product",
      "name": "Rotate PDF Tool",
      "description": "Free online tool to rotate PDF pages permanently with individual or bulk controls.",
      "url": "https://www.pdf99.org/rotate-pdf",
      "image": "https://www.pdf99.org/assets/og-image-rotate-pdf.png",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/OnlineOnly",
        "url": "https://www.pdf99.org/rotate-pdf"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "1872",
        "bestRating": "5",
        "worstRating": "1"
      },
      "review": [
        {
          "@type": "Review",
          "reviewRating": {
            "@type": "Rating",
            "ratingValue": "5",
            "bestRating": "5"
          },
          "author": {
            "@type": "Person",
            "name": "User"
          },
          "reviewBody": "Perfect! I needed to rotate several scanned PDF pages and this did it instantly, right in my browser. No upload, completely private."
        }
      ]
    }
  ]
}
</script>

    <!-- libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
    <script>
        if (window["pdfjsLib"])
            pdfjsLib.GlobalWorkerOptions.workerSrc =
                "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.min.js";
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

        /* Hide scrollbar universally but keep scroll functionality */
        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            display: none;
            width: 0 !important;
            height: 0 !important;
        }

        :root {
            --nav-h: 72px;
            --footer-h: 64px;
            --settings-w: 320px;
            --content-max-w: 1200px;
            --fab-bottom-base: 16px;
            --fab-vertical-gap: 72px;
        }

        * {
            box-sizing: border-box;
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
                "Helvetica Neue", Arial;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        body {
            background: #f9fafb;
            padding-top: var(--nav-h);
            padding-bottom: var(--footer-h);
        }

        nav.site-nav {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            height: var(--nav-h);
            background: #fff;
            border-bottom: 1px solid #eee;
            z-index: 60;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-inner {
            width: 100%;
            max-width: var(--content-max-w);
            margin: 0 auto;
            display: flex;
            align-items: center;
            position: relative;
            padding: 0 18px;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 70;
        }

        .nav-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .nav-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 70;
        }

        .nav-links {
            color: #374151;
            font-size: 13px;
            text-transform: uppercase;
            gap: 14px;
            display: flex;
            align-items: center;
        }

        .more-dropdown {
            position: relative;
        }

        .more-dropdown-menu {
            position: absolute;
            top: calc(var(--nav-h));
            right: 0;
            background: #fff;
            border: 1px solid #e6edf3;
            border-radius: 8px;
            padding: 8px 0;
            display: none;
            min-width: 200px;
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
        }

        .more-dropdown-menu.open {
            display: block;
        }

        .more-dropdown-menu a {
            display: block;
            padding: 8px 16px;
            color: #374151;
            text-decoration: none;
            font-size: 14px;
        }

        .more-dropdown-menu a:hover {
            background: #fbfbfd;
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .more-dropdown {
                display: none !important;
            }

            .nav-center {
                display: none !important;
            }
        }

        .mobile-hamburger {
            display: none;
            border: 0;
            background: transparent;
            font-size: 20px;
        }

        @media (max-width: 768px) {
            .mobile-hamburger {
                display: inline-flex;
            }
        }

        .mobile-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 260px;
            background: #fff;
            transform: translateX(-110%);
            transition: transform 0.26s;
            padding: 16px;
            border-right: 1px solid #eef2f6;
            z-index: 980;
            overflow: auto;
        }

        .mobile-sidebar.open {
            transform: translateX(0);
        }

        .mobile-sidebar .close {
            display: block;
            margin-bottom: 12px;
            margin-left: auto;
            font-size: 1.2rem;
            font-weight: 900;
        }

        .mobile-sidebar a {
            display: block;
            padding: 10px 8px;
            color: #333;
            text-decoration: none;
            border-radius: 6px;
        }

        .mobile-sidebar a:hover {
            background: #f8fafc;
            color: #ef4444;
        }

        .mobile-more-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 10px 8px;
            border-radius: 6px;
            cursor: pointer;
        }

        .mobile-more-list {
            display: none;
            margin-top: 6px;
            padding-left: 6px;
        }

        .mobile-more-list a {
            padding: 8px 6px;
            display: block;
            color: #333;
            text-decoration: none;
            border-radius: 6px;
        }

        .mobile-more-list.open {
            display: block;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.45);
            z-index: 920;
            display: none;
        }

        .overlay.open {
            display: block;
        }

        footer.site-footer {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            height: var(--footer-h);
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            border-top: 1px solid #eee;
            z-index: 60;
        }

        .page-wrap {
            max-width: var(--content-max-w);
            margin: 0 auto;
            padding: 18px;
        }

        .settings-panel {
            transition: transform 0.24s;
        }

        @media (min-width: 769px) {
            .settings-panel {
                position: fixed;
                right: 0;
                top: var(--nav-h);
                bottom: var(--footer-h);
                width: var(--settings-w);
                background: #fff;
                border-radius: 0;
                box-shadow: none;
                border-left: 1px solid #f1f5f9;
                padding: 20px;
                overflow: auto;
                z-index: 960;
            }

            .main-content {
                margin-right: calc(var(--settings-w) + 18px);
                position: relative;
            }

            .add-more-btn {
                position: fixed;
                right: calc(var(--settings-w) + 12px);
                bottom: 15%;
                transform: translateY(-50%);
                z-index: 940;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #fff;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            }

            #rotate-btn-desktop {
                position: absolute;
                left: 20px;
                right: 20px;
                bottom: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .settings-panel .content-padding-bottom {
                padding-bottom: 86px;
            }
        }

        @media (max-width: 768px) {
            .settings-panel {
                position: fixed;
                right: 0;
                top: 0;
                bottom: 0;
                width: 85%;
                max-width: 320px;
                transform: translateX(100%);
                background: #fff;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
                padding: 28px;
                z-index: 990;
            }

            .settings-panel.open {
                transform: translateX(0);
            }

            #rotate-btn-mobile {
                position: fixed;
                right: 18px;
                bottom: calc(var(--footer-h) + var(--fab-bottom-base));
                z-index: 940;
                min-width: 56px;
                padding-left: 12px;
                padding-right: 12px;
                border-radius: 999px;
            }

            .add-more-btn {
                position: fixed;
                right: 18px;
                bottom: calc(var(--footer-h) + var(--fab-bottom-base) + var(--fab-vertical-gap));
                z-index: 940;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
                background: #fff;
            }

            #open-settings {
                position: fixed;
                right: 18px;
                bottom: calc(var(--footer-h) + var(--fab-bottom-base) + calc(var(--fab-vertical-gap) * 2));
                z-index: 940;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
                background: #fff;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0 0 0 0);
            white-space: nowrap;
            border: 0;
        }

        .file-input {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0 0 0 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }

        body.panel-open .add-more-btn,
        body.panel-open #open-settings,
        body.panel-open #rotate-btn-mobile {
            z-index: 880 !important;
        }

        .paper-page {
            background: white;
            border-radius: 4px;
            box-shadow: 0 6px 20px rgba(136, 135, 135, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
        }

        .paper-page img {
            display: block;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .paper-page .pdf-icon {
            font-size: 48px;
            color: #ef4444;
        }

        .thumbnail-actions {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.18s;
        }

        .thumbnail-container:hover .thumbnail-actions,
        .paper-page:hover .thumbnail-actions {
            opacity: 1;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
            cursor: pointer;
        }

        /* Rotation indicator badge */
        .rotation-badge {
            position: absolute;
            bottom: 8px;
            left: 8px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            pointer-events: none;
        }

        /* Option card styling */
        .option-card {
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            display: flex;
            gap: 12px;
            align-items: center;
            background: white;
        }

        .option-card .radio {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #d1d5db;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-left: 2px;
        }

        .option-card .radio .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: transparent;
        }

        .option-card .text {
            text-align: left;
        }

        .option-card .title {
            font-weight: 600;
            color: #111827;
            line-height: 1.05;
        }

        .option-card .subtitle {
            font-size: 13px;
            color: #6b7280;
            margin-top: 4px;
        }

        .option-card.selected {
            border-color: #ef4444;
            background: #fffaf9;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.06);
        }

        .option-card.selected .radio {
            border-color: #ef4444;
        }

        .option-card.selected .radio .dot {
            background: #ef4444;
        }

        .thumbnail-container {
            position: relative;
            transition: transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1),
                box-shadow 180ms, opacity 120ms;
        }

        /* new sections */
        .pdf-sections {
            max-width: 1200px;
            margin: 48px auto;
            padding: 0 18px;
            font-family: Inter, system-ui, sans-serif;
            color: #111827;
        }

        .section-head {
            text-align: center;
            margin-bottom: 24px;
        }

        .section-head h2 {
            font-size: 1.6rem;
            font-weight: 700;
            margin: 0;
        }

        /* Steps */
        .steps-3-wrap {
            text-align: center;
            margin-top: 18px;
        }

        .steps-3-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 36px;
            align-items: start;
        }

        @media (max-width: 980px) {
            .steps-3-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 560px) {
            .steps-3-grid {
                grid-template-columns: 1fr;
            }
        }

        .step-inner {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 12px;
        }

        .step-badge {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #ef4444;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.15);
        }

        .step-title {
            font-weight: 700;
            font-size: 1rem;
            margin: 4px 0;
        }

        .step-desc {
            margin: 0;
            color: #6b7280;
            font-size: 0.93rem;
            line-height: 1.6;
        }

        /* Explore Tools */
        .card-grid {
            margin-top: 24px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 18px;
        }

        .tool-link {
            text-decoration: none;
            color: inherit;
        }

        .tool-card {
            background: #fff;
            border: 1px solid #eef2f6;
            border-radius: 12px;
            padding: 18px;
            box-shadow: 0 6px 18px rgba(2, 6, 23, 0.03);
            display: flex;
            gap: 14px;
            align-items: flex-start;
            transition: transform .16s ease, box-shadow .16s ease;
        }

        .tool-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 36px rgba(2, 6, 23, 0.06);
        }

        .tool-icon {
            min-width: 48px;
            min-height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .icon-blue {
            background: rgba(37, 99, 235, 0.08);
        }

        .icon-red {
            background: rgba(239, 68, 68, 0.08);
        }

        .icon-orange {
            background: rgba(234, 88, 12, 0.08);
        }

        .icon-green {
            background: rgba(5, 150, 105, 0.08);
        }

        .icon-purple {
            background: rgba(124, 58, 237, 0.08);
        }

        .tool-card h3 {
            margin: 0 0 6px 0;
            font-size: 0.98rem;
            font-weight: 700;
            color: #0f172a;
        }

        .tool-card p {
            margin: 0;
            color: #6b7280;
            font-size: 0.92rem;
            line-height: 1.55;
        }

        /* Info sections */
        .info-text {
            margin: 0 auto;
            text-align: center;
            color: #374151;
            line-height: 1.7;
            font-size: 0.96rem;
        }

        .info-list {
            margin: 0 auto;
            padding-left: 20px;
            color: #374151;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .article-wrap {
            margin: 0 auto;
            line-height: 1.7;
            color: #374151;
            font-size: 0.95rem;
        }

        .rotate-controls {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .rotate-btn {
            flex: 1;
            padding: 10px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .rotate-btn:hover {
            background: #f9fafb;
            border-color: #ef4444;
        }

        .rotate-btn.primary {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }

        .rotate-btn.primary:hover {
            background: #dc2626;
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57TC57Z3" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- mobile sidebar -->
    <div id="mobile-sidebar" class="mobile-sidebar" aria-hidden="true">
        <button id="mobile-sidebar-close" class="close">✕</button>
        <nav>
            <a href="https://www.pdf99.org/">Home</a>
            <a href="pdf-converter">PDF Converter</a>
            <a href="compress-pdf">Compress PDF</a>
            <a href="rotate-pdf">Rotate PDF</a>

            <hr style="margin: 12px 0; border: none; border-top: 1px solid #eef2f6" />

            <div>
                <div id="mobile-more-toggle" class="mobile-more-toggle">
                    <span>More</span>
                    <i id="mobile-more-icon" class="fas fa-chevron-down"></i>
                </div>
                <div id="mobile-more-list" class="mobile-more-list">
                    <a href="merge-pdf">Merge PDF</a>
                    <a href="split-pdf">Split PDF</a>
                    <a href="jpg-to-pdf">JPG to PDF</a>
                </div>
            </div>
        </nav>
    </div>

    <div id="overlay" class="overlay" aria-hidden="true"></div>

    <!-- NAV -->
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-inner">
            <div class="nav-left">
                <div class="brand">
                    <a href="/" class="text-2xl font-bold text-red-600">PDF99</a>
                </div>
            </div>

            <div class="nav-center" aria-hidden="false">
                <div class="nav-links">
                    <a href="https://www.pdf99.org/" class="hover:text-red-600">Home</a>
                    <a href="pdf-converter" class="hover:text-red-600">PDF Converter</a>
                    <a href="compress-pdf" class="hover:text-red-600">Compress PDF</a>
                    <a href="rotate-pdf" class="hover:text-red-600">Rotate PDF</a>
                </div>
            </div>

            <div class="nav-right">
                <div class="more-dropdown" id="more-dropdown">
                    <button id="more-dropdown-toggle" class="px-2 py-1 inline-flex items-center gap-2"
                        aria-haspopup="true" aria-expanded="false">
                        More
                        <i class="fas fa-chevron-down" style="font-size: 12px" aria-hidden="true"></i>
                    </button>
                    <div id="more-dropdown-menu" class="more-dropdown-menu" aria-hidden="true">
                        <a href="merge-pdf">Merge PDF</a>
                        <a href="split-pdf">Split PDF</a>
                        <a href="jpg-to-pdf">JPG to PDF</a>
                    </div>
                </div>

                <button id="mobile-hamburger" class="mobile-hamburger" aria-label="Open menu">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- main content -->
    <div class="page-wrap">
        <main>
            <!-- Upload Screen -->
            <div id="upload-screen" class="flex flex-col items-center justify-center py-16">
                <h1 id="page-title" class="text-3xl font-bold text-center mb-6">
                    Rotate PDF Pages
                </h1>
                <p class="text-gray-600 text-center mb-8">
                    Permanently rotate PDF pages clockwise or counterclockwise. Private, fast, and free.
                </p>

                <div id="drop-area"
                    class="relative border-2 border-dashed border-gray-300 rounded-xl p-12 text-center bg-white max-w-md w-full">
                    <label for="file-input" class="cursor-pointer">
                        <div
                            class="bg-red-600 text-white font-medium py-3 px-6 rounded-full shadow-md hover:bg-red-700 transition mb-4">
                            Select PDFs
                        </div>
                        <p class="text-gray-500">- or drop PDF files here -</p>
                    </label>

                    <input id="file-input" class="file-input" type="file" accept="application/pdf" multiple />
                </div>

                <div class="flex justify-center space-x-6 mt-8">
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-file-pdf text-gray-600"></i>
                    </div>
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-rotate-right text-gray-600"></i>
                    </div>
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
                        <i class="fas fa-download text-gray-600"></i>
                    </div>
                </div>

                <!-- Info sections (same structure, content adapted for rotate) -->
                <div class="pdf-sections">
                    <!-- Steps -->
                    <section>
                        <div class="section-head mt-20">
                            <h2>How to Rotate a PDF Online</h2>
                        </div>
                        <div class="steps-3-wrap">
                            <div class="steps-3-grid">
                                <div class="step-inner">
                                    <div class="step-badge">1</div>
                                    <div class="step-title">Upload</div>
                                    <p class="step-desc">Select the PDF file you want to rotate. All pages are
                                        supported.</p>
                                </div>
                                <div class="step-inner">
                                    <div class="step-badge">2</div>
                                    <div class="step-title">Rotate</div>
                                    <p class="step-desc">Click on any page to rotate it, or use bulk controls to rotate
                                        all pages at once.</p>
                                </div>
                                <div class="step-inner">
                                    <div class="step-badge">3</div>
                                    <div class="step-title">Download</div>
                                    <p class="step-desc">Download your rotated PDF instantly, with all pages permanently
                                        rotated.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- What is PDF Rotation -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>What is PDF Page Rotation?</h2>
                        </div>
                        <p class="info-text">
                            A PDF rotator is a tool that helps you change the orientation of pages inside your document.
                            When you rotate PDF pages, you're permanently altering their display direction — perfect for
                            fixing scanned documents, adjusting mixed orientations, or preparing files for printing.
                            Think of it like turning a page in a book to read it better. The process to rotate PDF pages
                            is lossless, meaning the content quality stays exactly the same. Whether you need to rotate
                            a single page or every page, our tool gives you complete control. All rotation happens
                            locally in your browser, so your files never leave your device — completely private and
                            secure.
                        </p>
                    </section>

                    <!-- Why Rotate PDFs -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Why Rotate PDF Files?</h2>
                        </div>
                        <ul class="info-list">
                            <li><strong>Fix scanning errors:</strong> Scanned documents often come out sideways or
                                upside down — rotate them back to normal.</li>
                            <li><strong>Mixed orientations:</strong> Combine landscape and portrait pages into a
                                consistent orientation for better reading.</li>
                            <li><strong>Prepare for printing:</strong> Ensure all pages face the correct direction
                                before sending to a printer.</li>
                            <li><strong>Improve readability:</strong> Rotate pages to match your preferred viewing angle
                                on any device.</li>
                            <li><strong>No quality loss:</strong> Rotation modifies only the page orientation metadata —
                                images and text remain untouched.</li>
                        </ul>
                    </section>

                    <!-- Article -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Rotate PDF - Complete Guide</h2>
                        </div>
                        <div class="article-wrap">
                            <p>Have you ever opened a PDF and found some pages upside down or sideways? It's a common
                                issue, especially with scanned documents, multi-source compilations, or files created on
                                different devices. That's where a reliable PDF rotator becomes essential. When you
                                rotate PDF pages, you're not just temporarily changing the view — you're permanently
                                correcting the orientation so the file looks right every time it's opened.</p>

                            <h3>Best practices for rotating PDFs</h3>
                            <ol>
                                <li><strong>Rotate all pages at once:</strong> Use the "Rotate All" buttons to apply the
                                    same rotation to every page instantly.</li>
                                <li><strong>Individual page control:</strong> Click directly on a page thumbnail to
                                    rotate just that page — perfect for fixing single misoriented pages.</li>
                                <li><strong>Check before downloading:</strong> Preview the thumbnails to ensure all
                                    pages face the correct direction.</li>
                                <li><strong>Multiple files:</strong> You can upload several PDFs and rotate them
                                    together — each file keeps its own rotation settings.</li>
                            </ol>

                            <h3>When to use PDF rotation</h3>
                            <p>Students rotate PDFs to fix lecture slides scanned at odd angles. Office workers rotate
                                documents received from colleagues with mixed orientations. Photographers rotate
                                portfolios to ensure landscape and portrait images display correctly. Anyone dealing
                                with digital paperwork will find a PDF rotator invaluable for creating professional,
                                consistent documents. Our tool makes it effortless — and because it works entirely in
                                your browser, your sensitive documents never leave your computer.</p>
                        </div>
                    </section>

                    <!-- Explore Tools -->
                    <section style="margin-top:60px;">
                        <div class="section-head">
                            <h2>Explore Other PDF Tools</h2>
                        </div>
                        <div class="card-grid">
                            <a href="pdf-converter" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-blue"><i class="fas fa-file-pdf"></i></div>
                                    <div>
                                        <h3>PDF Converter</h3>
                                        <p>Convert Word, Excel, PPT, and images to PDF and back.</p>
                                    </div>
                                </div>
                            </a>
                            <a href="compress-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-red"><i class="fas fa-compress"></i></div>
                                    <div>
                                        <h3>Compress PDF</h3>
                                        <p>Reduce PDF file size while maintaining quality.</p>
                                    </div>
                                </div>
                            </a>
                            <a href="merge-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-orange"><i class="fas fa-layer-group"></i></div>
                                    <div>
                                        <h3>Merge PDF</h3>
                                        <p>Combine multiple PDFs into one document.</p>
                                    </div>
                                </div>
                            </a>
                            <a href="split-pdf" class="tool-link">
                                <div class="tool-card">
                                    <div class="tool-icon icon-purple"><i class="fas fa-cut"></i></div>
                                    <div>
                                        <h3>Split PDF</h3>
                                        <p>Extract pages or ranges into separate PDF files.</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Preview Screen (with rotation UI) -->
            <div id="preview-screen" class="hidden">
                <div class="main-content">
                    <div style="display: flex; gap: 18px; position: relative">
                        <div class="thumbnails-section mt-10 mb-10" style="flex: 1">
                            <div id="thumbnails-container" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                            </div>
                        </div>

                        <button id="add-more-btn" class="add-more-btn" title="Add more PDFs" aria-label="Add more">
                            <i class="fas fa-plus text-red-600 text-xl"></i>
                        </button>

                        <!-- Settings Panel (rotation controls) -->
                        <div class="settings-section settings-panel" id="settings-panel" aria-hidden="false">
                            <div class="content-padding-bottom">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-semibold">Rotation Controls</h3>
                                    <button id="close-settings" class="md:hidden text-gray-500 hover:text-gray-700">
                                        <i class="fas fa-times text-xl" aria-hidden="true"></i>
                                    </button>
                                </div>

                                <div class="space-y-6">
                                    <!-- Individual page hint -->
                                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800">
                                        <i class="fas fa-info-circle mr-2"></i> Click any page thumbnail to rotate it
                                        individually.
                                    </div>

                                    <!-- Bulk rotation options -->
                                    <div>
                                        <h4 class="font-medium mb-3">Rotate all pages</h4>
                                        <div class="rotate-controls">
                                            <button id="rotate-all-cw" class="rotate-btn"
                                                title="Rotate all pages clockwise">
                                                <i class="fas fa-rotate-right"></i> 90° CW
                                            </button>
                                            <button id="rotate-all-ccw" class="rotate-btn"
                                                title="Rotate all pages counterclockwise">
                                                <i class="fas fa-rotate-left"></i> 90° CCW
                                            </button>
                                            <button id="rotate-all-180" class="rotate-btn"
                                                title="Rotate all pages 180°">
                                                <i class="fas fa-undo-alt fa-flip-horizontal"></i> 180°
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Reset button -->
                                    <div>
                                        <button id="reset-rotations"
                                            class="w-full py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">
                                            <i class="fas fa-undo-alt mr-2"></i> Reset all rotations
                                        </button>
                                    </div>

                                    <div class="border-t pt-4">
                                        <p class="text-xs text-gray-500 mb-4">
                                            <i class="fas fa-lock mr-1"></i> 100% private — no file upload
                                        </p>
                                    </div>

                                    <button id="rotate-btn-desktop"
                                        class="hidden md:block bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center w-full">
                                        <span>Rotate PDF</span><i class="fas fa-download ml-2"
                                            aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile buttons -->
                <button id="rotate-btn-mobile"
                    class="rotate-btn-mobile bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center md:hidden fixed right-4 bottom-24 z-40">
                    <span>Rotate PDF</span><i class="fas fa-download ml-2"></i>
                </button>

                <button id="open-settings"
                    class="md:hidden fixed right-4 bottom-36 w-14 h-14 bg-white rounded-full shadow-lg flex items-center justify-center z-40">
                    <i class="fas fa-cog text-gray-700 text-xl" aria-hidden="true"></i>
                </button>

                <input id="add-more-input" class="file-input" type="file" accept="application/pdf" multiple />
            </div>

            <!-- Download Screen -->
            <div id="download-screen" class="hidden py-16 text-center">
                <h2 class="text-3xl font-bold mb-6">
                    Your rotated PDFs are ready
                </h2>
                <div class="bg-white rounded-xl shadow-sm p-8 max-w-md mx-auto mb-8">
                    <h3 class="text-xl font-semibold mb-6">Download</h3>
                    <button id="download-pdf"
                        class="bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-8 rounded-full shadow-md mb-6">
                        Download File(s)
                    </button>

                    <div id="download-file-list" class="text-sm text-gray-700 text-left max-h-60 overflow-y-auto"></div>
                </div>

                <div class="max-w-md mx-auto flex justify-center space-x-4">
                    <button id="back-to-edit" class="text-red-600 hover:text-red-800 font-medium">
                        ← Back to edit
                    </button>
                    <button id="rotate-more" class="text-red-600 hover:text-red-800 font-medium">
                        Rotate more files →
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- footer -->
    <footer class="site-footer">
        <div class="text-sm text-gray-700">©
            <script>document.write(new Date().getFullYear());</script>
            PDF99 - All rights reserved.
        </div>
    </footer>

    <!-- Converting overlay (simplified for rotation) -->
    <div id="converting-overlay" aria-hidden="true" style="
        display: none;
        position: fixed;
        inset: 0;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.95);
        z-index: 1400;
        flex-direction: column;
      ">
        <div class="text-center">
            <i class="fas fa-sync-alt fa-spin text-5xl text-red-600 mb-4"></i>
            <div class="text-xl font-semibold">Rotating pages...</div>
            <div class="text-gray-500 mt-2">Please wait</div>
        </div>
    </div>

    <!-- JavaScript for rotation functionality -->
    <script>
        (function () {
            // ----- State -----
            const state = {
                files: [],                // { file, pages, origSize, rotations: [] } rotations array per page (in degrees)
                outputs: [],              // for download screen
            };

            // ----- DOM Elements -----
            const uploadScreen = document.getElementById('upload-screen');
            const previewScreen = document.getElementById('preview-screen');
            const downloadScreen = document.getElementById('download-screen');
            const fileInput = document.getElementById('file-input');
            const addMoreInput = document.getElementById('add-more-input');
            const addMoreBtn = document.getElementById('add-more-btn');
            const thumbContainer = document.getElementById('thumbnails-container');
            const rotateBtnDesktop = document.getElementById('rotate-btn-desktop');
            const rotateBtnMobile = document.getElementById('rotate-btn-mobile');
            const downloadBtn = document.getElementById('download-pdf');
            const backToEdit = document.getElementById('back-to-edit');
            const rotateMore = document.getElementById('rotate-more');
            const openSettings = document.getElementById('open-settings');
            const closeSettings = document.getElementById('close-settings');
            const settingsPanel = document.getElementById('settings-panel');
            const overlay = document.getElementById('overlay');
            const dropArea = document.getElementById('drop-area');
            const rotateAllCw = document.getElementById('rotate-all-cw');
            const rotateAllCcw = document.getElementById('rotate-all-ccw');
            const rotateAll180 = document.getElementById('rotate-all-180');
            const resetRotations = document.getElementById('reset-rotations');
            const convertingOverlay = document.getElementById('converting-overlay');
            const downloadList = document.getElementById('download-file-list');

            // ----- Helper Functions -----
            const formatBytes = (b) => {
                if (!b) return '0 B';
                const k = 1024;
                const i = Math.floor(Math.log(b) / Math.log(k));
                return parseFloat((b / Math.pow(k, i)).toFixed(2)) + ' ' + ['Bytes', 'KB', 'MB', 'GB'][i];
            };

            const escapeHtml = (text) => {
                return (text + '').replace(/[&<>"]/g, m => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' })[m]);
            };

            // ----- File Handling -----
            async function handleFiles(fileList) {
                const pdfs = Array.from(fileList).filter(f => f.type === 'application/pdf' || f.name.endsWith('.pdf'));
                if (!pdfs.length) return alert('Please select PDF files');

                for (const file of pdfs) {
                    try {
                        const ab = await file.arrayBuffer();
                        const pdfDoc = await pdfjsLib.getDocument({ data: ab }).promise;
                        const numPages = pdfDoc.numPages;
                        // Initialize rotations array (0 for each page)
                        const rotations = new Array(numPages).fill(0);
                        state.files.push({
                            file,
                            pages: numPages,
                            origSize: file.size,
                            rotations: rotations,
                            pdfData: ab, // store arrayBuffer for later use
                        });
                        pdfDoc.destroy?.();
                    } catch (err) {
                        alert(`Could not read PDF: ${file.name}`);
                    }
                }
                if (state.files.length) showPreview();
            }

            function showPreview() {
                uploadScreen.classList.add('hidden');
                previewScreen.classList.remove('hidden');
                renderThumbnails();
            }

            // Render thumbnails with rotation badges
            function renderThumbnails() {
                thumbContainer.innerHTML = '';
                state.files.forEach((fileObj, fileIdx) => {
                    const { file, pages, rotations } = fileObj;

                    for (let pageIdx = 0; pageIdx < pages; pageIdx++) {
                        const container = document.createElement('div');
                        container.className = 'thumbnail-container relative bg-white p-2 rounded shadow-sm';
                        container.dataset.fileIdx = fileIdx;
                        container.dataset.pageIdx = pageIdx;

                        const rotation = rotations[pageIdx] || 0;
                        const rotationStyle = rotation ? `rotate(${rotation}deg)` : 'none';

                        const inner = document.createElement('div');
                        inner.className = 'paper-page w-full aspect-[3/4] flex items-center justify-center bg-gray-50 relative';
                        inner.innerHTML = `
              <i class="fas fa-file-pdf text-5xl text-red-400" style="transform: ${rotationStyle}; transition: transform 0.2s;"></i>
              <div class="rotation-badge">${rotation}°</div>
              <div class="thumbnail-actions">
                <div class="action-btn remove-btn" data-file="${fileIdx}" data-page="${pageIdx}"><i class="fas fa-times text-gray-700"></i></div>
              </div>
            `;

                        // Click to rotate +90°
                        inner.addEventListener('click', (e) => {
                            if (e.target.closest('.remove-btn')) return;
                            rotatePage(fileIdx, pageIdx, 90);
                        });

                        const meta = document.createElement('div');
                        meta.className = 'text-center mt-2';
                        meta.innerHTML = `
              <p class="text-xs truncate font-medium">${escapeHtml(file.name)} - p.${pageIdx + 1}</p>
              <p class="text-xs text-gray-500">${formatBytes(fileObj.origSize)}</p>
            `;

                        container.appendChild(inner);
                        container.appendChild(meta);
                        thumbContainer.appendChild(container);
                    }
                });

                // Attach remove buttons
                document.querySelectorAll('.remove-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const fileIdx = parseInt(btn.dataset.file);
                        const pageIdx = parseInt(btn.dataset.page);
                        // For simplicity, removing a page isn't implemented; instead we remove entire file.
                        // We'll implement remove file functionality.
                        removeFile(fileIdx);
                    });
                });
            }

            function removeFile(fileIdx) {
                state.files.splice(fileIdx, 1);
                if (state.files.length === 0) {
                    previewScreen.classList.add('hidden');
                    uploadScreen.classList.remove('hidden');
                } else {
                    renderThumbnails();
                }
            }

            function rotatePage(fileIdx, pageIdx, delta) {
                const file = state.files[fileIdx];
                if (!file) return;
                const current = file.rotations[pageIdx] || 0;
                file.rotations[pageIdx] = (current + delta) % 360;
                renderThumbnails(); // re-render to show updated rotation
            }

            // Bulk rotations
            function rotateAll(delta) {
                state.files.forEach((file, fIdx) => {
                    for (let p = 0; p < file.pages; p++) {
                        const current = file.rotations[p] || 0;
                        file.rotations[p] = (current + delta) % 360;
                    }
                });
                renderThumbnails();
            }

            rotateAllCw?.addEventListener('click', () => rotateAll(90));
            rotateAllCcw?.addEventListener('click', () => rotateAll(-90));
            rotateAll180?.addEventListener('click', () => rotateAll(180));

            resetRotations?.addEventListener('click', () => {
                state.files.forEach(file => {
                    file.rotations.fill(0);
                });
                renderThumbnails();
            });

            // ----- Rotation & PDF Generation -----
            async function processRotations() {
                convertingOverlay.style.display = 'flex';
                const outputs = [];

                for (const fileObj of state.files) {
                    const { file, rotations, pdfData } = fileObj;
                    try {
                        const pdf = await pdfjsLib.getDocument({ data: pdfData }).promise;
                        const numPages = pdf.numPages;
                        const pagePromises = [];

                        for (let i = 1; i <= numPages; i++) {
                            pagePromises.push(pdf.getPage(i).then(async page => {
                                const viewport = page.getViewport({ scale: 2.0 }); // reasonable scale for image
                                const canvas = document.createElement('canvas');
                                canvas.width = viewport.width;
                                canvas.height = viewport.height;
                                await page.render({ canvasContext: canvas.getContext('2d'), viewport }).promise;
                                const rot = rotations[i - 1] || 0;
                                // Apply rotation to image data (simple: rotate canvas via CSS then extract)
                                // Instead, we create a new canvas, rotate, and draw.
                                const rotRad = rot * Math.PI / 180;
                                let finalCanvas;
                                if (rot % 180 !== 0) {
                                    // swap width/height
                                    finalCanvas = document.createElement('canvas');
                                    finalCanvas.width = canvas.height;
                                    finalCanvas.height = canvas.width;
                                } else {
                                    finalCanvas = document.createElement('canvas');
                                    finalCanvas.width = canvas.width;
                                    finalCanvas.height = canvas.height;
                                }
                                const ctx = finalCanvas.getContext('2d');
                                ctx.translate(finalCanvas.width / 2, finalCanvas.height / 2);
                                ctx.rotate(rotRad);
                                ctx.drawImage(canvas, -canvas.width / 2, -canvas.height / 2);
                                return finalCanvas.toDataURL('image/jpeg', 0.9);
                            }));
                        }

                        const images = await Promise.all(pagePromises);
                        pdf.destroy?.();

                        // Build new PDF
                        let outPdf = null;
                        for (let j = 0; j < images.length; j++) {
                            const imgData = images[j];
                            const img = new Image();
                            await new Promise(res => { img.onload = res; img.src = imgData; });
                            const w = img.width, h = img.height;
                            if (j === 0) {
                                outPdf = new jspdf.jsPDF({ unit: 'px', format: [w, h], orientation: w > h ? 'landscape' : 'portrait' });
                            } else {
                                outPdf.addPage([w, h]);
                            }
                            outPdf.addImage(imgData, 'JPEG', 0, 0, w, h);
                        }
                        const blob = outPdf.output('blob');
                        outputs.push({
                            name: file.name.replace('.pdf', '-rotated.pdf'),
                            blob,
                            originalSize: fileObj.origSize,
                            newSize: blob.size,
                        });
                    } catch (e) {
                        console.error('Rotation failed', e);
                        outputs.push({ name: file.name, blob: file, originalSize: fileObj.origSize, newSize: fileObj.origSize, error: true });
                    }
                }
                convertingOverlay.style.display = 'none';
                return outputs;
            }

            async function handleRotate() {
                if (!state.files.length) return alert('Add PDFs first');
                state.outputs = await processRotations();
                previewScreen.classList.add('hidden');
                downloadScreen.classList.remove('hidden');
                renderDownloadList();
            }

            rotateBtnDesktop?.addEventListener('click', handleRotate);
            rotateBtnMobile?.addEventListener('click', handleRotate);

            function renderDownloadList() {
                downloadList.innerHTML = '';
                state.outputs.forEach(o => {
                    const before = formatBytes(o.originalSize);
                    const after = formatBytes(o.newSize);
                    downloadList.innerHTML += `<div class="mb-2"><span class="font-medium">${escapeHtml(o.name)}</span><br><span class="text-xs">${before} → ${after}</span></div>`;
                });
            }

            downloadBtn?.addEventListener('click', () => {
                if (!state.outputs?.length) return;
                if (state.outputs.length === 1) saveAs(state.outputs[0].blob, state.outputs[0].name);
                else {
                    const zip = new JSZip();
                    state.outputs.forEach(o => zip.file(o.name, o.blob));
                    zip.generateAsync({ type: 'blob' }).then(blob => saveAs(blob, 'rotated-pdfs.zip'));
                }
            });

            backToEdit?.addEventListener('click', () => {
                downloadScreen.classList.add('hidden');
                previewScreen.classList.remove('hidden');
            });

            rotateMore?.addEventListener('click', () => {
                state.files = [];
                state.outputs = [];
                downloadScreen.classList.add('hidden');
                uploadScreen.classList.remove('hidden');
                thumbContainer.innerHTML = '';
            });

            // ----- Drag & Drop -----
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(ev => dropArea?.addEventListener(ev, e => e.preventDefault()));
            dropArea?.addEventListener('drop', e => {
                e.preventDefault();
                handleFiles(e.dataTransfer.files);
            });
            fileInput?.addEventListener('change', e => { handleFiles(e.target.files); e.target.value = ''; });
            addMoreBtn?.addEventListener('click', () => addMoreInput?.click());
            addMoreInput?.addEventListener('change', e => { handleFiles(e.target.files); e.target.value = ''; });

            // ----- Mobile settings panel -----
            openSettings?.addEventListener('click', () => settingsPanel?.classList.add('open'));
            closeSettings?.addEventListener('click', () => settingsPanel?.classList.remove('open'));
            overlay?.addEventListener('click', () => settingsPanel?.classList.remove('open'));

            // ----- Mobile sidebar (same as before, but simplified) -----
            const mobileHamburger = document.getElementById('mobile-hamburger');
            const mobileSidebar = document.getElementById('mobile-sidebar');
            const mobileSidebarClose = document.getElementById('mobile-sidebar-close');
            mobileHamburger?.addEventListener('click', () => {
                mobileSidebar?.classList.add('open');
                overlay?.classList.add('open');
            });
            mobileSidebarClose?.addEventListener('click', () => {
                mobileSidebar?.classList.remove('open');
                overlay?.classList.remove('open');
            });
            overlay?.addEventListener('click', () => {
                mobileSidebar?.classList.remove('open');
                settingsPanel?.classList.remove('open');
            });

            const moreToggle = document.getElementById('more-dropdown-toggle');
            const moreMenu = document.getElementById('more-dropdown-menu');
            moreToggle?.addEventListener('click', (e) => {
                e.stopPropagation();
                moreMenu?.classList.toggle('open');
            });
            document.addEventListener('click', () => moreMenu?.classList.remove('open'));

            // Mobile more toggle
            const mobileMoreToggle = document.getElementById('mobile-more-toggle');
            const mobileMoreList = document.getElementById('mobile-more-list');
            const mobileMoreIcon = document.getElementById('mobile-more-icon');
            mobileMoreToggle?.addEventListener('click', () => {
                const isOpen = mobileMoreList?.classList.toggle('open');
                mobileMoreIcon?.classList.toggle('fa-chevron-down', !isOpen);
                mobileMoreIcon?.classList.toggle('fa-chevron-up', isOpen);
            });
        })();
    </script>

    <noscript>
        <div style="padding:16px;background:#fff;border-radius:8px;margin:18px auto;max-width:800px;text-align:center;">
            This Rotate PDF tool runs in the browser using JavaScript. Please enable JavaScript to use the tool.
        </div>
    </noscript>
</body>

</html>