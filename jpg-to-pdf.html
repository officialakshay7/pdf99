<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JPG to PDF Converter - PDF99</title>
  <meta name="description"
    content="Convert JPG images to PDF in seconds. Merge multiple images, set page size, orientation, margins and download - all in your browser." />
  <meta name="keywords"
    content="jpg to pdf, image to pdf, convert jpg to pdf, merge images to pdf, photo to pdf, pictures to pdf, create pdf from images, convert multiple images to pdf, online jpg to pdf converter, free jpg to pdf" />
  <link rel="canonical" href="https://www.pdf99.org/jpg-to-pdf" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#ef4444" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="JPG to PDF Converter - PDF99" />
  <meta property="og:description"
    content="Convert JPG images to PDF in seconds. Merge multiple images, set page size, orientation, margins and download - all in your browser." />
  <meta property="og:url" content="https://www.pdf99.org/jpg-to-pdf" />
  <meta property="og:site_name" content="PDF99" />
  <meta property="og:image" content="https://www.pdf99.org/assets/og-image-jpg-to-pdf.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="JPG to PDF Converter - PDF99" />
  <meta name="twitter:description"
    content="Convert JPG images to PDF in seconds. Merge multiple images, set page size, orientation, margins and download." />
  <meta name="twitter:image" content="https://www.pdf99.org/assets/og-image-jpg-to-pdf.png" />

  <!-- Performance hints -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    as="style" />

  <!-- Favicon & manifest (replace with your real files if different) -->
  <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png" />
  <link rel="manifest" href="manifest.json" />

  <!-- Structured data (JSON-LD): minimal, won't affect UI -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "WebSite",
            "url": "https://www.pdf99.org/",
            "name": "PDF99",
            "description": "Online PDF tools including JPG to PDF conversion."
          },
          {
            "@type": "SoftwareApplication",
            "name": "JPG to PDF Converter",
            "operatingSystem": "Web",
            "applicationCategory": "ImageConversion",
            "url": "https://www.pdf99.org/jpg-to-pdf",
            "description": "Convert JPG images to PDF in your browser."
          },
          {
            "@type": "BreadcrumbList",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://www.pdf99.org/"
              },
              {
                "@type": "ListItem",
                "position": 2,
                "name": "JPG to PDF",
                "item": "https://www.pdf99.org/jpg-to-pdf"
              }
            ]
          }
        ]
      }
    </script>

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

    /* Hide scrollbar universally but keep scroll functionality */

    /* For Chrome, Safari, Edge */
    html::-webkit-scrollbar,
    body::-webkit-scrollbar {
      display: none;
      /* hide scrollbar */
      width: 0 !important;
      /* ensure no width */
      height: 0 !important;
    }

    :root {
      --nav-h: 72px;
      --footer-h: 64px;
      --settings-w: 320px;
      --content-max-w: 1200px;
      --fab-bottom-base: 16px;
      /* distance above footer */
      --fab-vertical-gap: 72px;
      /* vertical gap between stacked FABs */
    }

    * {
      box-sizing: border-box;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
        "Helvetica Neue", Arial;
    }

    html,
    body {
      height: 100%;
      margin: 0;


      scrollbar-width: none;
      /* hide scrollbar */
      -ms-overflow-style: none;
      /* hide scrollbar */
    }

    body {
      background: #f9fafb;
      padding-top: var(--nav-h);
      padding-bottom: var(--footer-h);
    }

    /* NAV - fixed full width */
    nav.site-nav {
      position: fixed;
      left: 0;
      right: 0;
      top: 0;
      height: var(--nav-h);
      background: #fff;
      border-bottom: 1px solid #eee;
      z-index: 60;
      display: flex;
      align-items: center;
      justify-content: center;
      /* center inner container */
    }

    /* inner constrained container so nav has left/right spacing */
    .nav-inner {
      width: 100%;
      max-width: var(--content-max-w);
      margin: 0 auto;
      display: flex;
      align-items: center;
      position: relative;
      padding: 0 18px;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 70;
    }

    .nav-center {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .nav-right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 70;
    }

    .nav-links {
      color: #374151;
      font-size: 13px;
      text-transform: uppercase;
      gap: 14px;
      display: flex;
      align-items: center;
    }

    .more-dropdown {
      position: relative;
    }

    .more-dropdown-menu {
      position: absolute;
      top: calc(var(--nav-h));
      right: 0;
      background: #fff;
      border: 1px solid #e6edf3;
      border-radius: 8px;
      padding: 8px 0;
      display: none;
      min-width: 200px;
      box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
    }

    .more-dropdown-menu.open {
      display: block;
    }

    .more-dropdown-menu a {
      display: block;
      padding: 8px 16px;
      color: #374151;
      text-decoration: none;
      font-size: 14px;
    }

    .more-dropdown-menu a:hover {
      background: #fbfbfd;
      color: #ef4444;
    }

    /* HIDE the "More" dropdown from the nav on mobile */
    @media (max-width: 768px) {
      .more-dropdown {
        display: none !important;
      }

      .nav-center {
        display: none !important;
      }

      /* center nav hidden on mobile (hamburger used) */
    }

    /* mobile hamburger */
    .mobile-hamburger {
      display: none;
      border: 0;
      background: transparent;
      font-size: 20px;
    }

    @media (max-width: 768px) {
      .mobile-hamburger {
        display: inline-flex;
      }
    }

    /* mobile sidebar */
    /* Make sidebar above overlay so it's fully visible and interactive */
    .mobile-sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: #fff;
      transform: translateX(-110%);
      transition: transform 0.26s;
      padding: 16px;
      border-right: 1px solid #eef2f6;
      z-index: 980;
      /* higher than overlay and buttons */
      overflow: auto;
    }

    .mobile-sidebar.open {
      transform: translateX(0);
    }

    .mobile-sidebar .close {
      display: block;
      margin-bottom: 12px;
      margin-left: auto;
      font-size: 1.2rem;
      font-weight: 900;
    }

    .mobile-sidebar a {
      display: block;
      padding: 10px 8px;
      color: #333;
      text-decoration: none;
      border-radius: 6px;
    }

    .mobile-sidebar a:hover {
      background: #f8fafc;
      color: #ef4444;
    }

    /* mobile "more" inside sidebar */
    .mobile-more-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 10px 8px;
      border-radius: 6px;
      cursor: pointer;
    }

    .mobile-more-list {
      display: none;
      margin-top: 6px;
      padding-left: 6px;
    }

    .mobile-more-list a {
      padding: 8px 6px;
      display: block;
      color: #333;
      text-decoration: none;
      border-radius: 6px;
    }

    .mobile-more-list.open {
      display: block;
    }

    /* overlay sits under sidebar but above page content */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.45);
      z-index: 920;
      display: none;
    }

    .overlay.open {
      display: block;
    }

    /* footer fixed full width */
    footer.site-footer {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: var(--footer-h);
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      border-top: 1px solid #eee;
      z-index: 60;
    }

    .page-wrap {
      max-width: var(--content-max-w);
      margin: 0 auto;
      padding: 18px;
    }

    /* settings panel - desktop: fixed flush to nav & footer, no shadow, visually joined */
    .settings-panel {
      transition: transform 0.24s;
    }

    @media (min-width: 769px) {
      .settings-panel {
        position: fixed;
        right: 0;
        top: var(--nav-h);
        bottom: var(--footer-h);
        width: var(--settings-w);
        background: #fff;
        border-radius: 0;
        box-shadow: none;
        border-left: 1px solid #f1f5f9;
        padding: 20px;
        overflow: auto;
        z-index: 960;
        /* above floating buttons by default */
      }

      .main-content {
        margin-right: calc(var(--settings-w) + 18px);
        position: relative;
      }

      /* Add-more: fixed adjacent to panel edge (sticks to it while scrolling) */
      .add-more-btn {
        position: fixed;
        right: calc(var(--settings-w) + 12px);
        /* adjacent to panel */
        bottom: 15%;
        transform: translateY(-50%);
        z-index: 940;
        /* below settings panel but above page content */
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fff;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      }

      /* convert button pinned to bottom inside settings panel */
      #convert-btn-desktop {
        position: absolute;
        left: 20px;
        right: 20px;
        bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .settings-panel .content-padding-bottom {
        padding-bottom: 86px;
      }

      /* room for convert button */
    }

    /* mobile: settings slides in; stack settings/+ / convert vertically on right */
    @media (max-width: 768px) {
      .settings-panel {
        position: fixed;
        right: 0;
        top: 0;
        bottom: 0;
        width: 85%;
        max-width: 320px;
        transform: translateX(100%);
        background: #fff;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        /* border-radius: 8px; */
        padding: 28px;
        /* increased padding for mobile as requested */
        z-index: 990;
        /* above overlay and buttons */
      }

      .settings-panel.open {
        transform: translateX(0);
      }

      /* STACK the three floating buttons with consistent spacing so they don't overlap */
      #convert-btn-mobile {
        position: fixed;
        right: 18px;
        bottom: calc(var(--footer-h) + var(--fab-bottom-base));
        z-index: 940;
        min-width: 56px;
        padding-left: 12px;
        padding-right: 12px;
        border-radius: 999px;
      }

      .add-more-btn {
        position: fixed;
        right: 18px;
        bottom: calc(var(--footer-h) + var(--fab-bottom-base) + var(--fab-vertical-gap));
        z-index: 940;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        background: #fff;
      }

      #open-settings {
        position: fixed;
        right: 18px;
        bottom: calc(var(--footer-h) + var(--fab-bottom-base) + calc(var(--fab-vertical-gap) * 2));
        z-index: 940;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        background: #fff;
      }
    }

    /* visually hidden utility for SEO/accessibility */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      white-space: nowrap;
      border: 0;
    }

    /* visually hidden file inputs (accessible) */
    .file-input {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0 0 0 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }

    /* - When a panel opens we add `body.panel-open`. Lower floating buttons' z-index
        so they appear behind the panel while remaining visible otherwise. - */
    body.panel-open .add-more-btn,
    body.panel-open #open-settings,
    body.panel-open #convert-btn-mobile {
      z-index: 880 !important;
      /* lower than overlay (920) and panels (990/980) so buttons go behind */
    }

    /* visuals (paper, thumbnails, actions, etc.) */
    .paper-page {
      background: white;
      border-radius: 4px;
      box-shadow: 0 6px 20px rgba(136, 135, 135, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      transition: all 0.3s;
    }

    .paper-page img {
      display: block;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .thumbnail-actions {
      position: absolute;
      top: 8px;
      right: 8px;
      display: flex;
      gap: 8px;
      opacity: 0;
      transition: opacity 0.18s;
    }

    .thumbnail-container:hover .thumbnail-actions,
    .paper-page:hover .thumbnail-actions {
      opacity: 1;
    }

    .action-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
      cursor: pointer;
    }

    .option-card {
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px;
      cursor: pointer;
    }

    .option-card.selected {
      border-color: #ef4444;
      background: #fef2f2;
    }

    .thumbnail-container {
      position: relative;
      transition: transform 180ms cubic-bezier(0.2, 0.9, 0.2, 1),
        box-shadow 180ms, opacity 120ms;
      cursor: grab;
    }

    .thumbnail-container.dragging {
      cursor: grabbing;
      opacity: 0.6;
      transform: scale(0.98);
    }

    .thumbnail-container.drag-over {
      transform: translateY(-6px) scale(1.02);
    }

    /* new sections */

    .pdf-sections {
      max-width: 1200px;
      margin: 48px auto;
      padding: 0 18px;
      font-family: Inter, system-ui, sans-serif;
      color: #111827;
    }

    .section-head {
      text-align: center;
      margin-bottom: 24px;
    }

    .section-head h2 {
      font-size: 1.6rem;
      font-weight: 700;
      margin: 0;
    }

    /* Steps */
    .steps-3-wrap {
      text-align: center;
      margin-top: 18px;
    }

    .steps-3-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 36px;
      align-items: start;
    }

    @media (max-width: 980px) {
      .steps-3-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 560px) {
      .steps-3-grid {
        grid-template-columns: 1fr;
      }
    }

    .step-inner {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 12px;
    }

    .step-badge {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #ef4444;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.1rem;
      box-shadow: 0 10px 20px rgba(239, 68, 68, 0.15);
    }

    .step-title {
      font-weight: 700;
      font-size: 1rem;
      margin: 4px 0;
    }

    .step-desc {
      margin: 0;
      color: #6b7280;
      font-size: 0.93rem;
      line-height: 1.6;
    }

    /* Explore Tools */
    .card-grid {
      margin-top: 24px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 18px;
    }

    .tool-link {
      text-decoration: none;
      color: inherit;
    }

    .tool-card {
      background: #fff;
      border: 1px solid #eef2f6;
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(2, 6, 23, 0.03);
      display: flex;
      gap: 14px;
      align-items: flex-start;
      transition: transform .16s ease, box-shadow .16s ease;
    }

    .tool-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 14px 36px rgba(2, 6, 23, 0.06);
    }

    .tool-icon {
      min-width: 48px;
      min-height: 48px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
      color: #0f172a;
    }

    .icon-blue {
      background: rgba(37, 99, 235, 0.08);
    }

    .icon-red {
      background: rgba(239, 68, 68, 0.08);
    }

    .icon-orange {
      background: rgba(234, 88, 12, 0.08);
    }

    .icon-green {
      background: rgba(5, 150, 105, 0.08);
    }

    .icon-purple {
      background: rgba(124, 58, 237, 0.08);
    }

    .tool-card h3 {
      margin: 0 0 6px 0;
      font-size: 0.98rem;
      font-weight: 700;
      color: #0f172a;
    }

    .tool-card p {
      margin: 0;
      color: #6b7280;
      font-size: 0.92rem;
      line-height: 1.55;
    }

    /* Info sections */
    .info-text {
      /* max-width: 900px; */
      margin: 0 auto;
      text-align: center;
      color: #374151;
      line-height: 1.7;
      font-size: 0.96rem;
    }

    .info-list {
      /* max-width: 800px; */
      margin: 0 auto;
      padding-left: 20px;
      color: #374151;
      line-height: 1.7;
      font-size: 0.95rem;
    }

    .article-wrap {
      /* max-width: 900px; */
      margin: 0 auto;
      line-height: 1.7;
      color: #374151;
      font-size: 0.95rem;
    }

    @media (max-width:420px) {
      .tool-card {
        padding: 14px;
        gap: 12px;
      }

      .tool-icon {
        min-width: 48px;
        min-height: 48px;
      }
    }
  </style>
</head>

<body>
  <!-- hidden H1 for SEO (visually hidden, doesn't change UI) -->
  <!-- <h1 class="sr-only">JPG to PDF - Convert JPG images to PDF online</h1> -->

  <!-- mobile sidebar -->
  <div id="mobile-sidebar" class="mobile-sidebar" aria-hidden="true">
    <button id="mobile-sidebar-close" class="close">✕</button>
    <nav>
      <a href="https://www.pdf99.org/">Home</a>
      <a href="pdf-converter">PDF Converter</a>
      <a href="compress-pdf">Compress PDF</a>
      <a href="merge-pdf">Merge PDF</a>

      <hr style="margin: 12px 0; border: none; border-top: 1px solid #eef2f6" />

      <div>
        <div id="mobile-more-toggle" class="mobile-more-toggle">
          <span>More</span>
          <i id="mobile-more-icon" class="fas fa-chevron-down"></i>
        </div>
        <div id="mobile-more-list" class="mobile-more-list">
          <a href="jpg-to-pdf">JPG to PDF</a>
          <a href="split-pdf">Split PDF</a>
        </div>
      </div>
    </nav>
  </div>

  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- NAV -->
  <nav class="site-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-inner">
      <div class="nav-left">
        <div class="brand">
          <h1 class="text-2xl font-bold text-red-600">PDF99</h1>
        </div>
      </div>

      <div class="nav-center" aria-hidden="false">
        <div class="nav-links">
          <a href="https://www.pdf99.org/" class="hover:text-red-600">Home</a>
          <a href="pdf-converter" class="hover:text-red-600">PDF Converter</a>
          <a href="compress-pdf" class="hover:text-red-600">Compress PDF</a>
          <a href="merge-pdf" class="hover:text-red-600">Merge PDF</a>
        </div>
      </div>

      <div class="nav-right">
        <div class="more-dropdown" id="more-dropdown">
          <button id="more-dropdown-toggle" class="px-2 py-1 inline-flex items-center gap-2" aria-haspopup="true"
            aria-expanded="false">
            More
            <i class="fas fa-chevron-down" style="font-size: 12px" aria-hidden="true"></i>
          </button>
          <div id="more-dropdown-menu" class="more-dropdown-menu" aria-hidden="true">
            <a href="jpg-to-pdf">JPG to PDF</a>
            <a href="split-pdf">Split PDF</a>
          </div>
        </div>

        <button id="mobile-hamburger" class="mobile-hamburger" aria-label="Open menu">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- main content -->
  <div class="page-wrap">
    <main>
      <!-- Upload -->
      <div id="upload-screen" class="flex flex-col items-center justify-center py-16">
        <h2 class="text-3xl font-bold text-center mb-6">JPG to PDF</h2>
        <p class="text-gray-600 text-center mb-8">
          Convert JPG images to PDF in seconds. Easily adjust orientation and
          margins.
        </p>

        <div id="drop-area"
          class="relative border-2 border-dashed border-gray-300 rounded-xl p-12 text-center bg-white max-w-md w-full">
          <label for="file-input" class="cursor-pointer">
            <div
              class="bg-red-600 text-white font-medium py-3 px-6 rounded-full shadow-md hover:bg-red-700 transition mb-4">
              Select JPG images
            </div>
            <p class="text-gray-500">- or drop JPG images here -</p>
          </label>

          <!-- main file input (visually hidden but available) -->
          <input id="file-input" class="file-input" type="file" accept="image/jpeg" multiple />
        </div>

        <div class="flex justify-center space-x-6 mt-8">
          <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
            <i class="fas fa-cloud-upload-alt text-gray-600"></i>
          </div>
          <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
            <i class="fas fa-file-pdf text-gray-600"></i>
          </div>
          <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">
            <i class="fas fa-download text-gray-600"></i>
          </div>
        </div>

        <!-- ===== HTML for JPG to PDF page ===== -->
        <div class="pdf-sections">

          <!-- Steps -->
          <section>
            <div class="section-head mt-20">
              <h2>How to Convert JPG to PDF</h2>
            </div>

            <div class="steps-3-wrap">
              <div class="steps-3-grid">
                <div class="step-inner">
                  <div class="step-badge">1</div>
                  <div class="step-title">Upload images</div>
                  <p class="step-desc">Choose your JPG, PNG, or other image files that you want to turn into PDF.</p>
                </div>

                <div class="step-inner">
                  <div class="step-badge">2</div>
                  <div class="step-title">Arrange & set options</div>
                  <p class="step-desc">Reorder images, select page size, orientation, and margins for your PDF.</p>
                </div>

                <div class="step-inner">
                  <div class="step-badge">3</div>
                  <div class="step-title">Convert & download</div>
                  <p class="step-desc">Generate a PDF instantly and download your document with images preserved
                    perfectly.</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Explore Tools -->
          <section style="margin-top:60px;">
            <div class="section-head">
              <h2>Explore Other PDF Tools</h2>
            </div>

            <div class="card-grid">
              <a href="pdf-converter" class="tool-link">
                <div class="tool-card">
                  <div class="tool-icon icon-blue"><i class="fas fa-file-pdf"></i></div>
                  <div>
                    <h3>PDF Converter</h3>
                    <p>Convert Word, Excel, PPT, and images to PDF and back - preserve formatting and layout.</p>
                  </div>
                </div>
              </a>

              <a href="merge-pdf" class="tool-link">
                <div class="tool-card">
                  <div class="tool-icon icon-red"><i class="fas fa-layer-group"></i></div>
                  <div>
                    <h3>Merge PDF</h3>
                    <p>Combine multiple PDFs into one document. Reorder, preview, and merge in seconds.</p>
                  </div>
                </div>
              </a>

              <a href="split-pdf" class="tool-link">
                <div class="tool-card">
                  <div class="tool-icon icon-orange"><i class="fas fa-cut"></i></div>
                  <div>
                    <h3>Split PDF</h3>
                    <p>Extract pages or ranges into separate PDF files - useful for reorganizing and sharing.</p>
                  </div>
                </div>
              </a>

              <a href="compress-pdf" class="tool-link">
                <div class="tool-card">
                  <div class="tool-icon icon-green"><i class="fas fa-compress-alt"></i></div>
                  <div>
                    <h3>Compress PDF</h3>
                    <p>Reduce file size while keeping quality. Choose between balanced or strong compression.</p>
                  </div>
                </div>
              </a>
            </div>
          </section>

          <!-- What is JPG to PDF -->
          <section style="margin-top:60px;">
            <div class="section-head">
              <h2>What is JPG to PDF Conversion?</h2>
            </div>
            <p class="info-text">
              JPG to PDF conversion lets you combine one or multiple images into a single PDF file. This is ideal when
              sharing photographs, scanned receipts, ID cards, or design files in a professional format that’s easy to
              view, print, and store on any device.
            </p>
          </section>

          <!-- Why Convert -->
          <section style="margin-top:60px;">
            <div class="section-head">
              <h2>Why Convert Images to PDF?</h2>
            </div>
            <ul class="info-list">
              <li><strong>Universal readability:</strong> PDFs open the same way across all devices.</li>
              <li><strong>Organize multiple images:</strong> Merge several JPGs into a single PDF file for convenience.
              </li>
              <li><strong>Preserve quality:</strong> Images remain sharp while saving in a compact file format.</li>
              <li><strong>Professional format:</strong> Great for submitting assignments, reports, or official
                documents.</li>
            </ul>
          </section>

          <!-- Article -->
          <section style="margin-top:60px;">
            <div class="section-head">
              <h2>JPG to PDF - Complete Guide</h2>
            </div>
            <div class="article-wrap">
              <p>Turning JPG into PDF is one of the most popular document conversion tasks. PDF99 makes this simple:
                upload your images, adjust settings, and export a clean, professional PDF. You can merge multiple JPGs
                into a single file, arrange their order, and even add margins or page size adjustments.</p>

              <h3>Best practices</h3>
              <ol>
                <li><strong>Group related images:</strong> Keep similar documents or photos together in one PDF for
                  easier sharing.</li>
                <li><strong>Check orientation:</strong> Rotate your images before converting to ensure a clean final
                  layout.</li>
                <li><strong>Choose the right size:</strong> Use A4 for printing or Letter for U.S. documents.</li>
                <li><strong>Optimize storage:</strong> Compress the final PDF if working with a large number of images.
                </li>
              </ol>

              <h3>When to use</h3>
              <p>Use JPG to PDF when emailing multiple pictures, archiving scanned bills, creating photo albums, or
                preparing official submissions. It’s widely accepted for both personal and professional purposes, making
                your files easier to handle and share.</p>
            </div>
          </section>

        </div>
      </div>

      <!-- Preview -->
      <div id="preview-screen" class="hidden">
        <div class="main-content">
          <div style="display: flex; gap: 18px; position: relative">
            <div class="thumbnails-section mt-10 mb-10" style="flex: 1">
              <div id="thumbnails-container" class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-2"></div>
            </div>

            <!-- + button (only one) -->
            <button id="add-more-btn" class="add-more-btn" title="Add more images" aria-label="Add more">
              <i class="fas fa-plus text-red-600 text-xl"></i>
            </button>

            <!-- Settings panel -->
            <div class="settings-section settings-panel" id="settings-panel" aria-hidden="false">
              <div class="content-padding-bottom">
                <div class="flex justify-between items-center mb-6">
                  <h3 class="text-lg font-semibold">PDF settings</h3>
                  <button id="close-settings" class="md:hidden text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl" aria-hidden="true"></i>
                  </button>
                </div>

                <div class="space-y-6">
                  <div>
                    <h4 class="font-medium mb-3">Page orientation</h4>
                    <div class="grid grid-cols-2 gap-3">
                      <div class="option-card selected" data-value="portrait" id="orientation-portrait">
                        <div class="text-center">Portrait</div>
                      </div>
                      <div class="option-card" data-value="landscape" id="orientation-landscape">
                        <div class="text-center">Landscape</div>
                      </div>
                    </div>
                  </div>

                  <div>
                    <h4 class="font-medium mb-3">Page size</h4>
                    <select id="page-size-select"
                      class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500">
                      <option value="a4" selected>A4 (297x210 mm)</option>
                      <option value="letter">Letter (215.9x279.4 mm)</option>
                      <option value="legal">Legal (215.9x355.6 mm)</option>
                    </select>
                  </div>

                  <div>
                    <h4 class="font-medium mb-3">Page Margin</h4>
                    <div class="grid grid-cols-3 gap-3">
                      <div class="option-card selected" data-value="none" id="margin-none">
                        <div class="text-center">No margin</div>
                      </div>
                      <div class="option-card" data-value="small" id="margin-small">
                        <div class="text-center">Small margin</div>
                      </div>
                      <div class="option-card" data-value="big" id="margin-big">
                        <div class="text-center">Big margin</div>
                      </div>
                    </div>
                  </div>

                  <div class="flex items-center">
                    <input id="merge-pdf" type="checkbox"
                      class="h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded" checked />
                    <label for="merge-pdf" class="ml-2 block text-sm text-gray-900">Merge all images in one PDF
                      file</label>
                  </div>

                  <!-- On desktop this button is pinned inside the panel; on mobile convert-btn-mobile is used -->
                  <button id="convert-btn-desktop"
                    class="hidden md:block bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center">
                    <span>Convert to PDF</span><i class="fas fa-download ml-2" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile convert button (stacked on right with settings and +) -->
        <button id="convert-btn-mobile"
          class="convert-btn bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-6 rounded-full shadow-md flex items-center justify-center md:hidden">
          <span>Convert to PDF</span><i class="fas fa-download ml-2" aria-hidden="true"></i>
        </button>

        <!-- mobile settings trigger (only mobile) -->
        <button id="open-settings" class="md:hidden" aria-label="Open settings">
          <i class="fas fa-cog text-gray-700 text-xl" aria-hidden="true"></i>
        </button>

        <!-- single add-more file input -->
        <input id="add-more-input" class="file-input" type="file" accept="image/jpeg" multiple />
      </div>

      <!-- Download Screen (unchanged) -->
      <div id="download-screen" class="hidden py-16 text-center">
        <h2 class="text-3xl font-bold mb-6">
          Your images have been converted to PDF
        </h2>
        <div class="bg-white rounded-xl shadow-sm p-8 max-w-md mx-auto mb-8">
          <h3 class="text-xl font-semibold mb-6">Download PDF</h3>
          <button id="download-pdf"
            class="bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-8 rounded-full shadow-md mb-6">
            Download PDF
          </button>

          <div class="flex justify-center space-x-4 mb-8">
            <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
              <i class="fas fa-eye text-gray-600" aria-hidden="true"></i>
            </button>
            <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
              <i class="fas fa-pen text-gray-600" aria-hidden="true"></i>
            </button>
            <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
              <i class="fas fa-link text-gray-600" aria-hidden="true"></i>
            </button>
          </div>
        </div>

        <div class="max-w-md mx-auto flex justify-center space-x-4">
          <button id="back-to-edit" class="text-red-600 hover:text-red-800 font-medium">
            ← Back to edit
          </button>
          <button id="convert-more" class="text-red-600 hover:text-red-800 font-medium">
            Convert more files →
          </button>
        </div>
      </div>
    </main>
  </div>

  <!-- footer -->
  <footer class="site-footer">
    <div class="text-sm text-gray-700">©
      <script>
        document.write(new Date().getFullYear());
      </script>
      PDF99 - All rights reserved.
  </footer>

  <!-- Converting overlay -->
  <div id="converting-overlay" aria-hidden="true" style="
        display: none;
        position: fixed;
        inset: 0;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.95);
        z-index: 1400;
        flex-direction: column;
      ">
    <div style="
          width: 92%;
          max-width: 520px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
        ">
      <div style="width: 140px; height: 140px; position: relative">
        <svg width="140" height="140" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="gradient" x1="0%" x2="100%">
              <stop offset="0%" stop-color="#ef4444" />
              <stop offset="100%" stop-color="#fb7185" />
            </linearGradient>
          </defs>
          <circle class="ring-bg" cx="70" cy="70" r="52" fill="none" stroke="#f3f4f6" stroke-width="10"></circle>
          <circle id="ring-fg" class="ring-fg" cx="70" cy="70" r="52" fill="none" stroke="url(#gradient)"
            stroke-width="10" stroke-dasharray="326.725" stroke-dashoffset="326.725"></circle>
        </svg>
        <div style="
              position: absolute;
              left: 0;
              right: 0;
              top: 0;
              bottom: 0;
              display: flex;
              align-items: center;
              justify-content: center;
              flex-direction: column;
              pointer-events: none;
            ">
          <div id="ring-percent" style="font-size: 20px; font-weight: 700; color: #111827">
            0%
          </div>
          <div id="ring-status" style="font-size: 13px; color: #6b7280; margin-top: 6px">
            Uploading
          </div>
        </div>
      </div>
      <div style="text-align: center; color: #111827; font-weight: 600">
        Generating PDF, please wait...
      </div>
    </div>
  </div>

  <!-- JS: UI helpers + original app JS (logic untouched) -->
  <script>
    // UI helpers (dropdown, mobile sidebar, stacked buttons)
    (function () {
      const moreToggle = document.getElementById("more-dropdown-toggle");
      const moreMenu = document.getElementById("more-dropdown-menu");
      if (moreToggle) {
        moreToggle.addEventListener("click", (e) => {
          e.stopPropagation();
          moreMenu.classList.toggle("open");
        });
        document.addEventListener("click", () => {
          moreMenu.classList.remove("open");
        });
      }

      // Mobile sidebar + mobile "more" inside sidebar
      const mobileHamburger = document.getElementById("mobile-hamburger");
      const mobileSidebar = document.getElementById("mobile-sidebar");
      const mobileSidebarClose = document.getElementById(
        "mobile-sidebar-close"
      );
      const overlay = document.getElementById("overlay");

      const mobileMoreToggle = document.getElementById("mobile-more-toggle");
      const mobileMoreList = document.getElementById("mobile-more-list");
      const mobileMoreIcon = document.getElementById("mobile-more-icon");

      if (mobileMoreToggle) {
        mobileMoreToggle.addEventListener("click", () => {
          const isOpen = mobileMoreList.classList.toggle("open");
          mobileMoreIcon.classList.toggle("fa-chevron-down", !isOpen);
          mobileMoreIcon.classList.toggle("fa-chevron-up", isOpen);
        });
      }

      // mobile sidebar open/close
      mobileHamburger &&
        mobileHamburger.addEventListener("click", () => {
          mobileSidebar.classList.add("open");
          mobileSidebar.setAttribute("aria-hidden", "false");
          overlay.classList.add("open");
          document.body.classList.add("panel-open");
        });
      mobileSidebarClose &&
        mobileSidebarClose.addEventListener("click", () => {
          mobileSidebar.classList.remove("open");
          mobileSidebar.setAttribute("aria-hidden", "true");
          overlay.classList.remove("open");
          document.body.classList.remove("panel-open");
        });

      // overlay click closes panels and restores button ordering
      overlay &&
        overlay.addEventListener("click", () => {
          mobileSidebar && mobileSidebar.classList.remove("open");
          document.querySelector(".settings-panel") &&
            document
              .querySelector(".settings-panel")
              .classList.remove("open");
          overlay.classList.remove("open");
          document.body.classList.remove("panel-open");
        });

      // close on Escape (UI helper portion)
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          document.getElementById("more-dropdown-menu") &&
            document
              .getElementById("more-dropdown-menu")
              .classList.remove("open");
          mobileSidebar && mobileSidebar.classList.remove("open");
          document.querySelector(".settings-panel") &&
            document
              .querySelector(".settings-panel")
              .classList.remove("open");
          overlay && overlay.classList.remove("open");
          document.body.classList.remove("panel-open");
        }
      });

      // NOTE: removed add-more click duplicate here (kept single handler in setupListeners)
    })();

    // ===== original app JS (kept intact, only selectors used above) =====
    const state = {
      images: [],
      orientation: "portrait",
      pageSize: "a4",
      margin: "none",
      merge: true,
      pdfBlob: null,
      zipBlob: null,
    };

    const fileInput = document.getElementById("file-input");
    const addMoreInput = document.getElementById("add-more-input");
    const thumbnailsContainer = document.getElementById(
      "thumbnails-container"
    );
    const convertBtnMobile = document.getElementById("convert-btn-mobile");
    const convertBtnDesktop = document.getElementById("convert-btn-desktop");
    const downloadPdfBtn = document.getElementById("download-pdf");
    const backToEditBtn = document.getElementById("back-to-edit");
    const convertMoreBtn = document.getElementById("convert-more");
    const addMoreBtnRef = document.getElementById("add-more-btn");
    const pageSizeSelect = document.getElementById("page-size-select");
    const mergeCheckbox = document.getElementById("merge-pdf");
    const orientationPortrait = document.getElementById(
      "orientation-portrait"
    );
    const orientationLandscape = document.getElementById(
      "orientation-landscape"
    );
    const marginNone = document.getElementById("margin-none");
    const marginSmall = document.getElementById("margin-small");
    const marginBig = document.getElementById("margin-big");
    const dropArea = document.getElementById("drop-area");
    const settingsPanelRef = document.querySelector(".settings-panel");
    const overlayRef = document.getElementById("overlay");
    const openSettingsBtnRef = document.getElementById("open-settings");
    const closeSettingsBtnRef = document.getElementById("close-settings");
    const convertingOverlay = document.getElementById("converting-overlay");
    const ringFg = document.getElementById("ring-fg");
    const ringPercentEl = document.getElementById("ring-percent");
    const ringStatusEl = document.getElementById("ring-status");

    let dragSrcIndex = null;
    const wait = (ms) => new Promise((r) => setTimeout(r, ms));
    document.addEventListener("DOMContentLoaded", init);
    function init() {
      setupListeners();
      marginNone && marginNone.classList.add("selected");
      marginSmall && marginSmall.classList.remove("selected");
      marginBig && marginBig.classList.remove("selected");
    }

    function setupListeners() {
      fileInput && fileInput.addEventListener("change", handleFileSelect);
      addMoreInput &&
        addMoreInput.addEventListener("change", handleAddMoreFiles);
      ["dragenter", "dragover", "dragleave", "drop"].forEach(
        (evt) =>
          dropArea && dropArea.addEventListener(evt, preventDefaults, false)
      );
      ["dragenter", "dragover"].forEach(
        (evt) => dropArea && dropArea.addEventListener(evt, highlight, false)
      );
      ["dragleave", "drop"].forEach(
        (evt) =>
          dropArea && dropArea.addEventListener(evt, unhighlight, false)
      );
      dropArea && dropArea.addEventListener("drop", handleDrop, false);

      orientationPortrait &&
        orientationPortrait.addEventListener("click", () =>
          handleOptionSelect("orientation", "portrait")
        );
      orientationLandscape &&
        orientationLandscape.addEventListener("click", () =>
          handleOptionSelect("orientation", "landscape")
        );
      marginNone &&
        marginNone.addEventListener("click", () =>
          handleOptionSelect("margin", "none")
        );
      marginSmall &&
        marginSmall.addEventListener("click", () =>
          handleOptionSelect("margin", "small")
        );
      marginBig &&
        marginBig.addEventListener("click", () =>
          handleOptionSelect("margin", "big")
        );

      pageSizeSelect &&
        pageSizeSelect.addEventListener("change", (e) => {
          state.pageSize = e.target.value;
          renderThumbnails();
        });
      mergeCheckbox &&
        mergeCheckbox.addEventListener("change", (e) => {
          state.merge = e.target.checked;
        });

      convertBtnMobile &&
        convertBtnMobile.addEventListener("click", handleConvert);
      convertBtnDesktop &&
        convertBtnDesktop.addEventListener("click", handleConvert);

      downloadPdfBtn &&
        downloadPdfBtn.addEventListener("click", handleDownload);
      backToEditBtn &&
        backToEditBtn.addEventListener("click", () => {
          document.getElementById("download-screen").classList.add("hidden");
          document
            .getElementById("preview-screen")
            .classList.remove("hidden");
        });
      convertMoreBtn && convertMoreBtn.addEventListener("click", resetApp);

      // single "add more" handler (kept only here)
      addMoreBtnRef &&
        addMoreBtnRef.addEventListener(
          "click",
          () => addMoreInput && addMoreInput.click()
        );

      openSettingsBtnRef &&
        openSettingsBtnRef.addEventListener("click", () => {
          settingsPanelRef && settingsPanelRef.classList.add("open");
          overlayRef && overlayRef.classList.add("open");
          document.body.classList.add("panel-open");
        });
      closeSettingsBtnRef &&
        closeSettingsBtnRef.addEventListener("click", () => {
          settingsPanelRef && settingsPanelRef.classList.remove("open");
          overlayRef && overlayRef.classList.remove("open");
          document.body.classList.remove("panel-open");
        });
      overlayRef &&
        overlayRef.addEventListener("click", () => {
          settingsPanelRef && settingsPanelRef.classList.remove("open");
          overlayRef && overlayRef.classList.remove("open");
          document.body.classList.remove("panel-open");
        });
    }

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }
    function highlight() {
      dropArea && dropArea.classList.add("border-red-500", "bg-red-50");
    }
    function unhighlight() {
      dropArea && dropArea.classList.remove("border-red-500", "bg-red-50");
    }
    function handleDrop(e) {
      const dt = e.dataTransfer;
      handleFiles(dt.files);
    }

    function handleFileSelect(e) {
      handleFiles(e.target.files);
      e.target.value = "";
    }
    function handleAddMoreFiles(e) {
      handleFiles(e.target.files);
      e.target.value = "";
    }

    function handleFiles(files) {
      if (!files || files.length === 0) return;
      const imageFiles = Array.from(files).filter(
        (f) => f.type && f.type.startsWith && f.type.startsWith("image/")
      );
      if (imageFiles.length === 0) {
        alert("Please select image files only.");
        return;
      }
      let processed = 0;
      imageFiles.forEach((file) => {
        const reader = new FileReader();
        reader.onload = (ev) => {
          state.images.push({ file, dataUrl: ev.target.result, rotation: 0 });
          processed++;
          if (processed === imageFiles.length) showPreviewScreen();
        };
        reader.readAsDataURL(file);
      });
    }

    function showPreviewScreen() {
      document.getElementById("upload-screen").classList.add("hidden");
      document.getElementById("preview-screen").classList.remove("hidden");
      renderThumbnails();
    }

    function renderThumbnails() {
      thumbnailsContainer && (thumbnailsContainer.innerHTML = "");
      const pageDimensions = getPageDimensions();
      const aspectRatio = pageDimensions.height / pageDimensions.width;
      const width = 160;
      const height = width * aspectRatio;

      // exact pixel margins for thumbnail display: map logical margin to px
      const marginSizes = { none: 0, small: 12, big: 36 };
      const margin = marginSizes[state.margin];

      state.images.forEach((image, index) => {
        const container = document.createElement("div");
        container.className = "thumbnail-container relative";
        container.draggable = true;
        container.dataset.index = index;
        container.style.minHeight = height + 64 + "px";
        container.style.cursor = "grab";

        // drag handlers (same as before)...
        container.addEventListener("dragstart", (e) => {
          dragSrcIndex = index;
          container.classList.add("dragging");
          e.dataTransfer.effectAllowed = "move";
          try {
            const imgEl = container.querySelector("img");
            const canvas = document.createElement("canvas");
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const radius = 8;
            ctx.save();
            roundRectPath(ctx, 0, 0, canvas.width, canvas.height, radius);
            ctx.clip();
            const naturalW = imgEl.naturalWidth || imgEl.width;
            const naturalH = imgEl.naturalHeight || imgEl.height;
            let sx = 0,
              sy = 0,
              sWidth = naturalW,
              sHeight = naturalH;
            const imgRatio = naturalW / naturalH;
            const boxRatio = canvas.width / canvas.height;
            if (imgRatio > boxRatio) {
              const newWidth = naturalH * boxRatio;
              sx = (naturalW - newWidth) / 2;
              sWidth = newWidth;
            } else {
              const newHeight = naturalW / boxRatio;
              sy = (naturalH - newHeight) / 2;
              sHeight = newHeight;
            }
            ctx.drawImage(
              imgEl,
              sx,
              sy,
              sWidth,
              sHeight,
              0,
              0,
              canvas.width,
              canvas.height
            );
            ctx.restore();
            e.dataTransfer.setDragImage(
              canvas,
              canvas.width / 2,
              canvas.height / 2
            );
          } catch (err) {
            const tiny = document.createElement("canvas");
            tiny.width = 1;
            tiny.height = 1;
            e.dataTransfer.setDragImage(tiny, 0, 0);
          }
          e.dataTransfer.setData("text/plain", "");
        });

        container.addEventListener("dragover", (e) => {
          e.preventDefault();
          container.classList.add("drag-over");
          e.dataTransfer.dropEffect = "move";
        });
        container.addEventListener("dragleave", () => {
          container.classList.remove("drag-over");
        });
        container.addEventListener("drop", (e) => {
          e.preventDefault();
          container.classList.remove("drag-over");
          const destIndex = index;
          if (dragSrcIndex === null) return;
          if (destIndex !== dragSrcIndex) {
            const [moved] = state.images.splice(dragSrcIndex, 1);
            const insertIndex =
              destIndex > dragSrcIndex ? destIndex : destIndex;
            state.images.splice(insertIndex, 0, moved);
          }
          dragSrcIndex = null;
          document
            .querySelectorAll(".thumbnail-container.dragging")
            .forEach((el) => el.classList.remove("dragging"));
          renderThumbnails();
        });
        container.addEventListener("dragend", () => {
          dragSrcIndex = null;
          container.classList.remove("dragging");
          document
            .querySelectorAll(".thumbnail-container")
            .forEach((el) => el.classList.remove("drag-over"));
        });

        // paper page - set exact padding = margin so thumbnails reflect exact margin
        const inner = document.createElement("div");
        inner.className = "paper-page mb-3";
        inner.style.width = width + "px";
        inner.style.height = height + "px";
        inner.style.margin = "0 auto";
        inner.style.position = "relative";
        inner.style.overflow = "hidden";
        inner.style.padding = margin + "px"; // <-- exact margin visible in thumbnail

        const imgEl = document.createElement("img");
        imgEl.src = image.dataUrl;
        imgEl.alt = image.file.name;
        imgEl.loading = "lazy";
        imgEl.style.transform = `rotate(${image.rotation}deg)`;
        imgEl.style.maxWidth = "100%"; // fill the paper inner area respecting padding (margin)
        imgEl.style.maxHeight = "100%";
        imgEl.style.display = "block";

        const actions = document.createElement("div");
        actions.className = "thumbnail-actions";
        actions.style.top = "8px";
        actions.style.right = "8px";

        const rotateBtn = document.createElement("div");
        rotateBtn.className = "action-btn rotate-btn";
        rotateBtn.innerHTML = '<i class="fas fa-redo text-gray-700"></i>';
        rotateBtn.addEventListener("click", (ev) => {
          ev.stopPropagation();
          rotateImage(index);
        });

        const removeBtn = document.createElement("div");
        removeBtn.className = "action-btn remove-btn";
        removeBtn.innerHTML = '<i class="fas fa-times text-gray-700"></i>';
        removeBtn.addEventListener("click", (ev) => {
          ev.stopPropagation();
          removeImage(index);
        });

        actions.appendChild(rotateBtn);
        actions.appendChild(removeBtn);
        inner.appendChild(imgEl);
        inner.appendChild(actions);

        const meta = document.createElement("div");
        meta.className = "text-center mt-2";
        meta.innerHTML = `<p class="text-sm font-medium truncate">${image.file.name
          }</p><p class="text-xs text-gray-500">${formatFileSize(
            image.file.size
          )}</p>`;

        container.appendChild(inner);
        container.appendChild(meta);
        thumbnailsContainer && thumbnailsContainer.appendChild(container);
      });
    }

    function roundRectPath(ctx, x, y, w, h, r) {
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.arcTo(x + w, y, x + w, y + h, r);
      ctx.arcTo(x + w, y + h, x, y + h, r);
      ctx.arcTo(x, y + h, x, y, r);
      ctx.arcTo(x, y, x + w, y, r);
      ctx.closePath();
    }

    function getPageDimensions() {
      const pageSizes = {
        a4: [210, 297],
        letter: [215.9, 279.4],
        legal: [215.9, 355.6],
      };
      const [w, h] = pageSizes[state.pageSize];
      return state.orientation === "portrait"
        ? { width: w, height: h }
        : { width: h, height: w };
    }
    function rotateImage(index) {
      state.images[index].rotation =
        (state.images[index].rotation + 90) % 360;
      renderThumbnails();
    }
    function removeImage(index) {
      state.images.splice(index, 1);
      if (state.images.length === 0) {
        document.getElementById("preview-screen").classList.add("hidden");
        document.getElementById("upload-screen").classList.remove("hidden");
      } else renderThumbnails();
    }
    function handleOptionSelect(type, value) {
      if (type === "orientation") {
        state.orientation = value;
        orientationPortrait.classList.toggle(
          "selected",
          value === "portrait"
        );
        orientationLandscape.classList.toggle(
          "selected",
          value === "landscape"
        );
      } else if (type === "margin") {
        state.margin = value;
        marginNone.classList.toggle("selected", value === "none");
        marginSmall.classList.toggle("selected", value === "small");
        marginBig.classList.toggle("selected", value === "big");
      }
      renderThumbnails();
    }

    async function handleConvert() {
      if (state.images.length === 0) {
        alert("Please add at least one image.");
        return;
      }
      const duration = 5000;
      showConvertingOverlay();
      const animPromise = runRingAnimation(duration);
      const genPromise = generatePdfOrZip();
      try {
        await Promise.all([animPromise, genPromise]);
        hideConvertingOverlay();
        document.getElementById("preview-screen").classList.add("hidden");
        document.getElementById("download-screen").classList.remove("hidden");
      } catch (err) {
        hideConvertingOverlay();
        console.error("Conversion error:", err);
        alert("An error occurred while converting. Please try again.");
      }
    }

    function runRingAnimation(durationMs) {
      return new Promise((resolve) => {
        const radius = 52;
        const circumference = 2 * Math.PI * radius;
        ringFg && (ringFg.style.strokeDasharray = circumference.toString());
        let start = performance.now();
        function tick(now) {
          const elapsed = now - start;
          const t = Math.min(1, elapsed / durationMs);
          const percent = Math.floor(t * 100);
          const offset = circumference * (1 - t);
          ringFg && (ringFg.style.strokeDashoffset = offset.toString());
          ringPercentEl && (ringPercentEl.textContent = percent + "%");
          if (percent < 35)
            ringStatusEl && (ringStatusEl.textContent = "Uploading");
          else ringStatusEl && (ringStatusEl.textContent = "Converting");
          if (t < 1) requestAnimationFrame(tick);
          else {
            ringFg && (ringFg.style.strokeDashoffset = "0");
            ringPercentEl && (ringPercentEl.textContent = "100%");
            ringStatusEl && (ringStatusEl.textContent = "Converting");
            setTimeout(resolve, 250);
          }
        }
        requestAnimationFrame(tick);
      });
    }

    function showConvertingOverlay() {
      ringFg && (ringFg.style.transition = "none");
      const radius = 52;
      const circumference = 2 * Math.PI * radius;
      ringFg && (ringFg.style.strokeDasharray = circumference.toString());
      ringFg && (ringFg.style.strokeDashoffset = circumference.toString());
      void ringFg && ringFg.offsetWidth;
      ringFg && (ringFg.style.transition = "stroke-dashoffset 140ms linear");
      ringPercentEl && (ringPercentEl.textContent = "0%");
      ringStatusEl && (ringStatusEl.textContent = "Uploading");
      convertingOverlay && (convertingOverlay.style.display = "flex");
    }
    function hideConvertingOverlay() {
      convertingOverlay && (convertingOverlay.style.display = "none");
    }

    async function generatePdfOrZip() {
      state.pdfBlob = null;
      state.zipBlob = null;
      const { jsPDF } = window.jspdf;
      const pageSizes = {
        a4: [210, 297],
        letter: [215.9, 279.4],
        legal: [215.9, 355.6],
      };
      const marginSizes = { none: 0, small: 10, big: 25 };
      const margin = marginSizes[state.margin];
      const baseSize = pageSizes[state.pageSize];
      const [pageW_mm0, pageH_mm0] = baseSize;
      const pageWidth_mm =
        state.orientation === "portrait" ? pageW_mm0 : pageH_mm0;
      const pageHeight_mm =
        state.orientation === "portrait" ? pageH_mm0 : pageW_mm0;

      if (state.merge) {
        const pdf = new jsPDF({
          orientation: state.orientation,
          unit: "mm",
          format: state.pageSize,
        });
        for (let i = 0; i < state.images.length; i++) {
          if (i > 0) pdf.addPage();
          const imageObj = state.images[i];
          const { dataUrlForPdf, drawWidthMM, drawHeightMM } =
            await prepareImageForPdf(
              imageObj,
              pageWidth_mm,
              pageHeight_mm,
              margin
            );
          const x = (pageWidth_mm - drawWidthMM) / 2;
          const y = (pageHeight_mm - drawHeightMM) / 2;
          pdf.addImage(
            dataUrlForPdf,
            "JPEG",
            x,
            y,
            drawWidthMM,
            drawHeightMM
          );
        }
        state.pdfBlob = pdf.output("blob");
      } else {
        const zip = new JSZip();
        for (let i = 0; i < state.images.length; i++) {
          const pdf = new jsPDF({
            orientation: state.orientation,
            unit: "mm",
            format: state.pageSize,
          });
          const imageObj = state.images[i];
          const { dataUrlForPdf, drawWidthMM, drawHeightMM } =
            await prepareImageForPdf(
              imageObj,
              pageWidth_mm,
              pageHeight_mm,
              margin
            );
          const x = (pageWidth_mm - drawWidthMM) / 2;
          const y = (pageHeight_mm - drawHeightMM) / 2;
          pdf.addImage(
            dataUrlForPdf,
            "JPEG",
            x,
            y,
            drawWidthMM,
            drawHeightMM
          );
          const pdfBlob = pdf.output("blob");
          const nameWithoutExt = imageObj.file.name.replace(/\.[^/.]+$/, "");
          zip.file(`${nameWithoutExt}.pdf`, pdfBlob);
        }
        state.zipBlob = await zip.generateAsync({ type: "blob" });
      }
    }

    function prepareImageForPdf(
      imageObj,
      pageWidth_mm,
      pageHeight_mm,
      margin_mm
    ) {
      return new Promise((resolve) => {
        const img = new Image();
        img.onload = () => {
          let imgW = img.width,
            imgH = img.height;
          const rotation = imageObj.rotation % 360;
          const rotate90 = rotation === 90 || rotation === 270;
          const logicalW = rotate90 ? imgH : imgW;
          const logicalH = rotate90 ? imgW : imgH;
          const contentW_mm = pageWidth_mm - margin_mm * 2;
          const contentH_mm = pageHeight_mm - margin_mm * 2;
          const ratio = Math.min(
            contentW_mm / logicalW,
            contentH_mm / logicalH
          );
          const drawWidthMM = logicalW * ratio;
          const drawHeightMM = logicalH * ratio;
          const canvas = document.createElement("canvas");
          const ctx = canvas.getContext("2d");
          if (rotate90) {
            canvas.width = imgH;
            canvas.height = imgW;
            if (rotation === 90) {
              ctx.translate(canvas.width, 0);
              ctx.rotate(Math.PI / 2);
            } else {
              ctx.translate(0, canvas.height);
              ctx.rotate(-Math.PI / 2);
            }
            ctx.drawImage(img, 0, 0);
          } else if (rotation === 180) {
            canvas.width = imgW;
            canvas.height = imgH;
            ctx.translate(canvas.width, canvas.height);
            ctx.rotate(Math.PI);
            ctx.drawImage(img, 0, 0);
          } else {
            canvas.width = imgW;
            canvas.height = imgH;
            ctx.drawImage(img, 0, 0);
          }
          const dataUrlForPdf = canvas.toDataURL("image/jpeg", 0.92);
          resolve({ dataUrlForPdf, drawWidthMM, drawHeightMM });
        };
        img.onerror = () =>
          resolve({
            dataUrlForPdf: imageObj.dataUrl,
            drawWidthMM: pageWidth_mm - margin_mm * 2,
            drawHeightMM: pageHeight_mm - margin_mm * 2,
          });
        img.src = imageObj.dataUrl;
      });
    }

    function handleDownload() {
      const now = new Date();
      const timestamp = `${now.getFullYear()}${String(
        now.getMonth() + 1
      ).padStart(2, "0")}${String(now.getDate()).padStart(2, "0")}-${String(
        now.getHours()
      ).padStart(2, "0")}${String(now.getMinutes()).padStart(2, "0")}${String(
        now.getSeconds()
      ).padStart(2, "0")}`;
      if (state.merge && state.pdfBlob) {
        saveAs(state.pdfBlob, `images-to-pdf-${timestamp}.pdf`);
      } else if (!state.merge && state.zipBlob) {
        saveAs(state.zipBlob, `images-to-pdf-${timestamp}.zip`);
      } else alert("No file available to download. Please convert first.");
      downloadPdfBtn.innerHTML = "Downloading...";
            setTimeout(() => {
                downloadPdfBtn.innerHTML = "Download PDF";
            }, 1000);
    }

    function resetApp() {
      state.images = [];
      state.orientation = "portrait";
      state.pageSize = "a4";
      state.margin = "none";
      state.merge = true;
      state.pdfBlob = null;
      state.zipBlob = null;
      orientationPortrait && orientationPortrait.classList.add("selected");
      orientationLandscape &&
        orientationLandscape.classList.remove("selected");
      marginNone && marginNone.classList.add("selected");
      marginSmall && marginSmall.classList.remove("selected");
      marginBig && marginBig.classList.remove("selected");
      pageSizeSelect && (pageSizeSelect.value = "a4");
      mergeCheckbox && (mergeCheckbox.checked = true);
      document.getElementById("download-screen").classList.add("hidden");
      document.getElementById("upload-screen").classList.remove("hidden");
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return "0 Bytes";
      const k = 1024;
      const sizes = ["Bytes", "KB", "MB", "GB"];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
    }
  </script>

  <noscript>
    <div style="
          padding: 16px;
          background: #fff;
          border-radius: 8px;
          margin: 18px auto;
          max-width: 800px;
          text-align: center;
        ">
      This JPG to PDF converter runs in the browser using JavaScript. Please
      enable JavaScript to use the tool.
    </div>
  </noscript>
</body>

</html>